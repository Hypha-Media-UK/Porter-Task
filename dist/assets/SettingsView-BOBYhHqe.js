import{a as W,_ as O}from"./index-DclK01DE.js";import{L as pe}from"./LoadingSpinner-DXicQQVY.js";import{a as G,c as H,r as w,b as t,e,f as k,A as V,I as U,H as te,F,C as K,G as ae,t as j,o,E as me,L as de,w as ve,h as ne,l as J,B as ee,M as fe,D as le,N,J as oe,n as ie,k as re,O as ue,i as ge}from"./vendor-d6AZ6u8N.js";const ye={class:"department-manager"},ke={key:0,class:"add-department-form"},he={class:"color-picker"},we={class:"form-actions"},be=["disabled"],_e={class:"departments-list"},$e={key:0,class:"empty-state"},xe={key:1,class:"departments-grid"},Ce={class:"department-info"},De={class:"department-name"},Be={class:"department-actions"},Se=["onClick"],Ee=["onClick"],Ve={class:"modal-content"},Ie={class:"modal-body"},Le={class:"form-group"},Me={class:"form-group"},je={class:"modal-footer"},Te=["disabled"],Ae={class:"modal-content"},Ue={class:"modal-body"},Ne=G({__name:"DesignationDepartmentManager",setup(P){const x=W(),r=H(()=>x.designationDepartments),S=w(!1),s=w({name:"",color:"#4361ee"}),u=w(!1),C=w({id:"",name:"",color:""}),v=w(!1),a=w(null);function g(){s.value.name.trim()&&(x.addDesignationDepartment(s.value.name,s.value.color),s.value={name:"",color:"#4361ee"},S.value=!1)}function I(){s.value={name:"",color:"#4361ee"},S.value=!1}function A(b){C.value={...b},u.value=!0}function $(){C.value.id&&C.value.name.trim()&&(x.updateDesignationDepartment(C.value.id,C.value.name,C.value.color),u.value=!1)}function y(){u.value=!1}function L(b){a.value=b,v.value=!0}function D(){a.value&&(x.deleteDesignationDepartment(a.value.id),v.value=!1,a.value=null)}function f(){v.value=!1,a.value=null}return(b,p)=>{var z;return o(),t("div",ye,[p[18]||(p[18]=e("div",{class:"section-header"},[e("h2",null,"Department Designations"),e("p",{class:"section-description"}," These departments are used for porter assignments during shifts. ")],-1)),S.value?(o(),t("div",ke,[V(e("input",{type:"text","onUpdate:modelValue":p[0]||(p[0]=M=>s.value.name=M),placeholder:"Department Name",class:"form-control"},null,512),[[U,s.value.name]]),e("div",he,[V(e("input",{type:"color","onUpdate:modelValue":p[1]||(p[1]=M=>s.value.color=M),class:"color-input"},null,512),[[U,s.value.color]]),p[5]||(p[5]=e("span",{class:"color-label"},"Department Color",-1))]),e("div",we,[e("button",{class:"btn-secondary",onClick:I},"Cancel"),e("button",{class:"btn-primary",onClick:g,disabled:!s.value.name.trim()}," Add Department ",8,be)])])):k("",!0),S.value?k("",!0):(o(),t("button",{key:1,class:"btn-primary add-btn",onClick:p[2]||(p[2]=M=>S.value=!0)},p[6]||(p[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),te(" Add Department ")]))),e("div",_e,[r.value.length===0?(o(),t("div",$e,p[7]||(p[7]=[e("p",null,"No department designations have been created yet.",-1)]))):(o(),t("div",xe,[(o(!0),t(F,null,K(r.value,M=>(o(),t("div",{key:M.id,class:"department-card"},[e("div",{class:"department-color",style:me({backgroundColor:M.color||"#cccccc"})},null,4),e("div",Ce,[e("span",De,j(M.name),1)]),e("div",Be,[e("button",{class:"btn-icon edit-btn",onClick:R=>A(M),title:"Edit department"},p[8]||(p[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)]),8,Se),e("button",{class:"btn-icon delete-btn",onClick:R=>L(M),title:"Delete department"},p[9]||(p[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,Ee)])]))),128))]))]),u.value?(o(),t("div",{key:2,class:"modal-backdrop",onClick:ae(y,["self"])},[e("div",Ve,[e("div",{class:"modal-header"},[p[11]||(p[11]=e("h3",null,"Edit Department",-1)),e("button",{class:"btn-close",onClick:y},p[10]||(p[10]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),e("div",Ie,[e("div",Le,[p[12]||(p[12]=e("label",null,"Department Name",-1)),V(e("input",{type:"text","onUpdate:modelValue":p[3]||(p[3]=M=>C.value.name=M),class:"form-control",placeholder:"Department Name"},null,512),[[U,C.value.name]])]),e("div",Me,[p[13]||(p[13]=e("label",null,"Department Color",-1)),V(e("input",{type:"color","onUpdate:modelValue":p[4]||(p[4]=M=>C.value.color=M),class:"color-input"},null,512),[[U,C.value.color]])])]),e("div",je,[e("button",{class:"btn-secondary",onClick:y},"Cancel"),e("button",{class:"btn-primary",onClick:$,disabled:!C.value.name.trim()}," Update ",8,Te)])])])):k("",!0),v.value?(o(),t("div",{key:3,class:"modal-backdrop",onClick:ae(f,["self"])},[e("div",Ae,[e("div",{class:"modal-header"},[p[15]||(p[15]=e("h3",null,"Delete Department",-1)),e("button",{class:"btn-close",onClick:f},p[14]||(p[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),e("div",Ue,[e("p",null,[p[16]||(p[16]=te(" Are you sure you want to delete the department ")),e("strong",null,j((z=a.value)==null?void 0:z.name),1),p[17]||(p[17]=te("? This will also remove any porter assignments to this department. "))])]),e("div",{class:"modal-footer"},[e("button",{class:"btn-secondary",onClick:f},"Cancel"),e("button",{class:"btn-danger",onClick:D},"Delete")])])])):k("",!0)])}}}),qe=O(Ne,[["__scopeId","data-v-a3ad79ae"]]),ze={class:"settings-section"},Fe={class:"setting-group"},He={class:"setting-row"},Ke={class:"setting-control"},Pe={class:"setting-row"},Re={class:"setting-control"},Je={class:"switch"},We={class:"setting-group"},Oe={class:"setting-row shift-time-row"},Ge={class:"setting-control time-control"},Qe={class:"time-inputs"},Xe={class:"time-input-group"},Ye={class:"time-input-group"},Ze={class:"setting-row shift-time-row"},et={class:"setting-control time-control"},tt={class:"time-inputs"},ot={class:"time-input-group"},nt={class:"time-input-group"},st=G({__name:"ApplicationSettings",setup(P){const x=W(),r=de({storage:{type:"local",autoBackup:!0},shifts:x.shifts});return ve(()=>r.shifts,S=>{x.updateSettings({shifts:S})},{deep:!0}),ne(()=>{}),(S,s)=>(o(),t("section",ze,[s[18]||(s[18]=e("h2",null,"Application Settings",-1)),J(qe),e("div",Fe,[e("div",He,[s[7]||(s[7]=e("div",{class:"setting-label"},[e("h3",null,"Data Storage"),e("p",null,"Choose how shift data is stored and backed up")],-1)),e("div",Ke,[V(e("select",{"onUpdate:modelValue":s[0]||(s[0]=u=>r.storage.type=u),class:"select-control"},s[6]||(s[6]=[e("option",{value:"local"},"Local Storage",-1),e("option",{value:"cloud"},"Cloud Storage",-1)]),512),[[ee,r.storage.type]])])]),e("div",Pe,[s[9]||(s[9]=e("div",{class:"setting-label"},[e("h3",null,"Auto Backup"),e("p",null,"Automatically create backups of completed shifts")],-1)),e("div",Re,[e("label",Je,[V(e("input",{type:"checkbox","onUpdate:modelValue":s[1]||(s[1]=u=>r.storage.autoBackup=u)},null,512),[[fe,r.storage.autoBackup]]),s[8]||(s[8]=e("span",{class:"slider round"},null,-1))])])])]),s[19]||(s[19]=e("h2",null,"Shift Schedule",-1)),e("div",We,[e("div",Oe,[s[13]||(s[13]=e("div",{class:"setting-label"},[e("h3",null,"Day Shift Hours"),e("p",null,"Set the standard start and end times for day shifts")],-1)),e("div",Ge,[e("div",Qe,[e("div",Xe,[s[10]||(s[10]=e("label",null,"Start",-1)),V(e("input",{type:"time","onUpdate:modelValue":s[2]||(s[2]=u=>r.shifts.day.start=u),class:"time-input"},null,512),[[U,r.shifts.day.start]])]),s[12]||(s[12]=e("span",{class:"time-separator"},"to",-1)),e("div",Ye,[s[11]||(s[11]=e("label",null,"End",-1)),V(e("input",{type:"time","onUpdate:modelValue":s[3]||(s[3]=u=>r.shifts.day.end=u),class:"time-input"},null,512),[[U,r.shifts.day.end]])])])])]),e("div",Ze,[s[17]||(s[17]=e("div",{class:"setting-label"},[e("h3",null,"Night Shift Hours"),e("p",null,"Set the standard start and end times for night shifts")],-1)),e("div",et,[e("div",tt,[e("div",ot,[s[14]||(s[14]=e("label",null,"Start",-1)),V(e("input",{type:"time","onUpdate:modelValue":s[4]||(s[4]=u=>r.shifts.night.start=u),class:"time-input"},null,512),[[U,r.shifts.night.start]])]),s[16]||(s[16]=e("span",{class:"time-separator"},"to",-1)),e("div",nt,[s[15]||(s[15]=e("label",null,"End",-1)),V(e("input",{type:"time","onUpdate:modelValue":s[5]||(s[5]=u=>r.shifts.night.end=u),class:"time-input"},null,512),[[U,r.shifts.night.end]])])])])])])]))}}),lt=O(st,[["__scopeId","data-v-9817a2c5"]]),it={class:"settings-section"},at={class:"setting-group"},rt={class:"supervisor-list"},dt={key:0,class:"empty-state"},ut={key:1,class:"list-items"},vt={class:"supervisor-info"},ct={key:0,class:"supervisor-name"},pt=["onKeyup"],mt={class:"supervisor-actions"},ft=["onClick"],gt=["onClick"],yt=["onClick"],kt={class:"add-supervisor"},ht=["disabled"],wt=G({__name:"SupervisorsList",setup(P){const x=W(),{supervisors:r}=x,S=w(""),s=w(null),u=w(""),C=w(null),v=()=>{const $=S.value.trim();$&&!r.includes($)&&x.addSupervisor($)&&(S.value="")},a=$=>{s.value=$,u.value=$,oe(()=>{var y;(y=C.value)==null||y.focus()})},g=$=>{const y=u.value.trim();y&&x.updateSupervisor($,y)&&(s.value=null)},I=()=>{s.value=null,u.value=""},A=$=>{confirm(`Are you sure you want to remove supervisor "${$}"?`)&&x.deleteSupervisor($)};return($,y)=>(o(),t("section",it,[y[7]||(y[7]=e("h2",null,"Supervisors",-1)),e("div",at,[e("div",rt,[le(r).length===0?(o(),t("div",dt,y[2]||(y[2]=[e("p",null,"No supervisors added yet",-1)]))):(o(),t("div",ut,[(o(!0),t(F,null,K(le(r),(L,D)=>(o(),t("div",{key:D,class:"list-item"},[e("div",vt,[s.value!==L?(o(),t("span",ct,j(L),1)):V((o(),t("input",{key:1,type:"text","onUpdate:modelValue":y[0]||(y[0]=f=>u.value=f),onKeyup:[N(f=>g(L),["enter"]),N(I,["esc"])],ref_for:!0,ref_key:"supervisorEditInput",ref:C,class:"edit-input"},null,40,pt)),[[U,u.value]])]),e("div",mt,[s.value!==L?(o(),t("button",{key:0,class:"btn-icon",onClick:f=>a(L),"aria-label":"Edit supervisor"},y[3]||(y[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)]),8,ft)):k("",!0),s.value===L?(o(),t("button",{key:1,class:"btn-icon",onClick:f=>g(L),"aria-label":"Save supervisor"},y[4]||(y[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e("polyline",{points:"17 21 17 13 7 13 7 21"}),e("polyline",{points:"7 3 7 8 15 8"})],-1)]),8,gt)):k("",!0),s.value===L?(o(),t("button",{key:2,class:"btn-icon",onClick:I,"aria-label":"Cancel edit"},y[5]||(y[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))):k("",!0),s.value!==L?(o(),t("button",{key:3,class:"btn-icon",onClick:f=>A(L),"aria-label":"Remove supervisor"},y[6]||(y[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M3 6h18"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,yt)):k("",!0)])]))),128))])),e("div",kt,[V(e("input",{type:"text","onUpdate:modelValue":y[1]||(y[1]=L=>S.value=L),placeholder:"Enter supervisor name",onKeyup:N(v,["enter"])},null,544),[[U,S.value]]),e("button",{class:"btn-primary",onClick:v,disabled:!S.value.trim()}," Add ",8,ht)])])])]))}}),bt=O(wt,[["__scopeId","data-v-9fb286f3"]]),_t={class:"settings-section"},$t={class:"setting-group"},xt={class:"porter-list"},Ct={key:0,class:"empty-state"},Dt={key:1,class:"list-items"},Bt={class:"porter-info"},St={key:0,class:"porter-name"},Et=["onKeyup"],Vt={class:"porter-actions"},It=["onClick"],Lt=["onClick"],Mt=["onClick"],jt={class:"add-porter"},Tt=["disabled"],At=G({__name:"PortersList",setup(P){const x=W(),{porters:r}=x,{addPorter:S,updatePorter:s,deletePorter:u}=x,C=w(""),v=w(null),a=w(""),g=w(null),I=()=>{const D=C.value.trim();S(D)&&(C.value="")},A=D=>{v.value=D,a.value=D,oe(()=>{var f;(f=g.value)==null||f.focus()})},$=D=>{const f=a.value.trim();f&&s(D,f)&&(v.value=null)},y=()=>{v.value=null,a.value=""},L=D=>{confirm(`Are you sure you want to remove porter "${D}"?`)&&u(D)};return(D,f)=>(o(),t("section",_t,[f[7]||(f[7]=e("h2",null,"Porters",-1)),e("div",$t,[e("div",xt,[le(r).length===0?(o(),t("div",Ct,f[2]||(f[2]=[e("p",null,"No porters added yet",-1)]))):(o(),t("div",Dt,[(o(!0),t(F,null,K(le(r),(b,p)=>(o(),t("div",{key:p,class:"list-item"},[e("div",Bt,[v.value!==b?(o(),t("span",St,j(b),1)):V((o(),t("input",{key:1,type:"text","onUpdate:modelValue":f[0]||(f[0]=z=>a.value=z),onKeyup:[N(z=>$(b),["enter"]),N(y,["esc"])],ref_for:!0,ref_key:"porterEditInput",ref:g,class:"edit-input"},null,40,Et)),[[U,a.value]])]),e("div",Vt,[v.value!==b?(o(),t("button",{key:0,class:"btn-icon",onClick:z=>A(b),"aria-label":"Edit porter"},f[3]||(f[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)]),8,It)):k("",!0),v.value===b?(o(),t("button",{key:1,class:"btn-icon",onClick:z=>$(b),"aria-label":"Save porter"},f[4]||(f[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e("polyline",{points:"17 21 17 13 7 13 7 21"}),e("polyline",{points:"7 3 7 8 15 8"})],-1)]),8,Lt)):k("",!0),v.value===b?(o(),t("button",{key:2,class:"btn-icon",onClick:y,"aria-label":"Cancel edit"},f[5]||(f[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))):k("",!0),v.value!==b?(o(),t("button",{key:3,class:"btn-icon",onClick:z=>L(b),"aria-label":"Remove porter"},f[6]||(f[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M3 6h18"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,Mt)):k("",!0)])]))),128))])),e("div",jt,[V(e("input",{type:"text","onUpdate:modelValue":f[1]||(f[1]=b=>C.value=b),placeholder:"Enter porter name",onKeyup:N(I,["enter"])},null,544),[[U,C.value]]),e("button",{class:"btn-primary",onClick:I,disabled:!C.value.trim()}," Add ",8,Tt)])])])]))}}),Ut=O(At,[["__scopeId","data-v-7756c645"]]),Nt={class:"settings-section"},qt={class:"setting-group"},zt={class:"buildings"},Ft={class:"building-header"},Ht={class:"building-info"},Kt={key:0,class:"building-name"},Pt=["onKeyup"],Rt={class:"building-actions"},Jt=["onClick"],Wt=["onClick"],Ot=["onClick"],Gt={class:"location-section"},Qt={class:"location-list"},Xt={class:"location-info"},Yt={key:0},Zt={key:0,class:"frequent-badge"},eo=["onKeyup"],to={class:"location-actions"},oo=["onClick"],no=["onClick"],so=["onClick","aria-label","title"],lo=["onClick"],io={key:0,class:"empty-list-item"},ao={class:"add-location"},ro=["onUpdate:modelValue","onKeyup"],uo=["onClick","disabled"],vo={class:"add-building"},co=["disabled"],po=G({__name:"BuildingsLocations",setup(P){const x=W(),r=H(()=>x.buildings),{addBuilding:S,updateBuilding:s,deleteBuilding:u,addDepartment:C,updateDepartment:v,deleteDepartment:a,addWard:g,updateWard:I,deleteWard:A}=x,$=w(""),y=w(null),L=w(""),D=w(null),f=w(null),b=w(null),p=w(""),z=w(null),M=de({}),R=_=>_.departments||[];ne(()=>{r.value.length===0?(console.log("No buildings found, attempting to initialize store..."),x.initialize().catch(_=>console.error("Error initializing store:",_))):console.log("Buildings loaded:",r.value.length),r.value.forEach(_=>{M[_.id]=""})});const X=()=>{const _=$.value.trim();if(_){console.log("Adding building:",_);try{const i=_.toLowerCase().replace(/\s+/g,"-");if(r.value.some(E=>E.name===_||E.id===i)){console.error("Building with this name or ID already exists"),alert("A building with this name already exists.");return}const d={id:i,name:_,departments:[],wards:[]};S(_)||(console.log("Store add function failed, adding directly to buildings array"),x.buildings.push(d)),M[i]="",$.value="",console.log("Building added successfully. Current buildings:",r.value)}catch(i){console.error("Error adding building:",i),alert("An error occurred while adding a building.")}}},Y=_=>{const i=r.value.find(d=>d.id===_);i&&(y.value=_,L.value=i.name,oe(()=>{var d;(d=D.value)==null||d.focus()}))},Q=_=>{const i=L.value.trim();i&&s(_,i)&&(y.value=null)},Z=()=>{y.value=null,L.value=""},m=_=>{const i=r.value.find(d=>d.id===_);i&&confirm(`Are you sure you want to remove building "${i.name}" and all its departments?`)&&(u(_),delete M[_])},l=_=>{var d;const i=(d=M[_])==null?void 0:d.trim();i&&(C(_,i),M[_]="")},n=(_,i)=>{const d=r.value.find(E=>E.id===_);if(!d)return;let h=d.departments.find(E=>E.id===i);h||(h=d.wards.find(E=>E.id===i)),h&&(b.value=_,f.value=i,p.value=h.name,oe(()=>{var E;(E=z.value)==null||E.focus()}))},c=(_,i)=>{const d=p.value.trim();if(!r.value.find(E=>E.id===_))return!1;d&&(v(_,i,d),b.value=null,f.value=null)},q=()=>{b.value=null,f.value=null,p.value=""},B=(_,i)=>{const d=r.value.find(E=>E.id===_);if(!d)return;const h=d.departments.find(E=>E.id===i);h&&confirm(`Are you sure you want to remove department "${h.name}"?`)&&a(_,i)},T=(_,i)=>{const d=r.value.find(E=>E.id===_);if(!d)return;const h=d.departments.find(E=>E.id===i.id);if(h){if(h.frequent=!h.frequent,h.frequent&&h.order===void 0){let E=-1;r.value.forEach(ce=>{ce.departments.forEach(se=>{se.frequent&&se.order!==void 0&&se.order>E&&(E=se.order)})}),h.order=E+1}x.saveLocationDataToFile()}};return(_,i)=>(o(),t("section",Nt,[i[13]||(i[13]=e("h2",null,"Buildings & Locations",-1)),e("div",qt,[e("div",zt,[(o(!0),t(F,null,K(r.value,d=>(o(),t("div",{key:d.id,class:"building-section"},[e("div",Ft,[e("div",Ht,[y.value!==d.id?(o(),t("span",Kt,j(d.name),1)):V((o(),t("input",{key:1,type:"text","onUpdate:modelValue":i[0]||(i[0]=h=>L.value=h),onKeyup:[N(h=>Q(d.id),["enter"]),N(Z,["esc"])],ref_for:!0,ref_key:"buildingEditInput",ref:D,class:"edit-input"},null,40,Pt)),[[U,L.value]])]),e("div",Rt,[y.value!==d.id?(o(),t("button",{key:0,class:"btn-icon",onClick:h=>Y(d.id),"aria-label":"Edit building"},i[3]||(i[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)]),8,Jt)):k("",!0),y.value===d.id?(o(),t("button",{key:1,class:"btn-icon",onClick:h=>Q(d.id),"aria-label":"Save building"},i[4]||(i[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e("polyline",{points:"17 21 17 13 7 13 7 21"}),e("polyline",{points:"7 3 7 8 15 8"})],-1)]),8,Wt)):k("",!0),y.value===d.id?(o(),t("button",{key:2,class:"btn-icon",onClick:Z,"aria-label":"Cancel edit"},i[5]||(i[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))):k("",!0),y.value!==d.id?(o(),t("button",{key:3,class:"btn-icon",onClick:h=>m(d.id),"aria-label":"Remove building"},i[6]||(i[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M3 6h18"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,Ot)):k("",!0)])]),e("div",Gt,[i[12]||(i[12]=e("h4",null,"Departments",-1)),e("ul",Qt,[(o(!0),t(F,null,K(R(d),h=>(o(),t("li",{key:h.id,class:"location-item"},[e("div",Xt,[f.value!==h.id||b.value!==d.id?(o(),t("span",Yt,[te(j(h.name)+" ",1),h.frequent?(o(),t("span",Zt,"Frequent")):k("",!0)])):V((o(),t("input",{key:1,type:"text","onUpdate:modelValue":i[1]||(i[1]=E=>p.value=E),onKeyup:[N(E=>c(d.id,h.id),["enter"]),N(q,["esc"])],ref_for:!0,ref_key:"departmentEditInput",ref:z,class:"edit-input"},null,40,eo)),[[U,p.value]])]),e("div",to,[f.value!==h.id||b.value!==d.id?(o(),t("button",{key:0,class:"btn-icon sm",onClick:E=>n(d.id,h.id),"aria-label":"Edit department"},i[7]||(i[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)]),8,oo)):k("",!0),f.value===h.id&&b.value===d.id?(o(),t("button",{key:1,class:"btn-icon sm",onClick:E=>c(d.id,h.id),"aria-label":"Save department"},i[8]||(i[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e("polyline",{points:"17 21 17 13 7 13 7 21"}),e("polyline",{points:"7 3 7 8 15 8"})],-1)]),8,no)):k("",!0),f.value===h.id&&b.value===d.id?(o(),t("button",{key:2,class:"btn-icon sm",onClick:q,"aria-label":"Cancel edit"},i[9]||(i[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))):k("",!0),f.value!==h.id||b.value!==d.id?(o(),t("button",{key:3,class:"btn-icon sm",onClick:E=>T(d.id,h),"aria-label":h.frequent?"Remove from frequent":"Add to frequent",title:h.frequent?"Remove from frequent":"Add to frequent"},[(o(),t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:ie({"star-filled":h.frequent})},i[10]||(i[10]=[e("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},null,-1)]),2))],8,so)):k("",!0),f.value!==h.id||b.value!==d.id?(o(),t("button",{key:4,class:"btn-icon sm",onClick:E=>B(d.id,h.id),"aria-label":"Remove department"},i[11]||(i[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]),8,lo)):k("",!0)])]))),128)),R(d).length===0?(o(),t("li",io," No departments added ")):k("",!0)]),e("div",ao,[V(e("input",{type:"text","onUpdate:modelValue":h=>M[d.id]=h,placeholder:"Enter department name",onKeyup:N(h=>l(d.id),["enter"])},null,40,ro),[[U,M[d.id]]]),e("button",{class:"btn-primary",onClick:h=>l(d.id),disabled:!M[d.id]||!M[d.id].trim()}," Add ",8,uo)])])]))),128)),e("div",vo,[V(e("input",{type:"text","onUpdate:modelValue":i[2]||(i[2]=d=>$.value=d),placeholder:"Enter new building name",onKeyup:N(X,["enter"])},null,544),[[U,$.value]]),e("button",{class:"btn-primary",onClick:X,disabled:!$.value.trim()}," Add Building ",8,co)])])])]))}}),mo=O(po,[["__scopeId","data-v-71898e8b"]]),fo={class:"settings-section"},go={class:"setting-group"},yo={class:"frequent-users"},ko={key:0,class:"empty-state"},ho={key:1,class:"frequent-list"},wo={class:"location-info"},bo={class:"location-name"},_o={class:"location-building"},$o={class:"location-actions"},xo=["onClick"],Co=G({__name:"FrequentUsers",setup(P){const x=W(),r=H(()=>x.buildings),S=w([]),s=()=>{const v=[];r.value.forEach(a=>{a.departments&&a.departments.forEach(g=>{g.frequent&&v.push({...g,buildingId:a.id,locationType:"department",order:g.order||999})})}),S.value=v.sort((a,g)=>(a.order||999)-(g.order||999))},u=v=>{const a=r.value.find(g=>g.id===v);return a?a.name:"Unknown Building"},C=v=>{const a=r.value.find(I=>I.id===v.buildingId);if(!a)return;const g=a.departments.find(I=>I.id===v.id);g&&(g.frequent=!1,x.saveLocationDataToFile(),s())};return ve(()=>r.value,()=>{s()},{deep:!0}),ne(()=>{s()}),(v,a)=>(o(),t("section",fo,[a[3]||(a[3]=e("h2",null,"Frequent Users",-1)),e("div",go,[e("div",yo,[S.value.length===0?(o(),t("div",ko,a[0]||(a[0]=[e("p",null,"No frequent locations added yet.",-1),e("p",{class:"hint"},'To add frequent locations, mark departments as "Frequent" in the Buildings & Locations section.',-1)]))):(o(),t("div",ho,[(o(!0),t(F,null,K(S.value,g=>(o(),t("div",{key:g.id,class:"frequent-item"},[a[2]||(a[2]=re('<div class="drag-handle" data-v-25f7854d><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-25f7854d><line x1="8" y1="6" x2="21" y2="6" data-v-25f7854d></line><line x1="8" y1="12" x2="21" y2="12" data-v-25f7854d></line><line x1="8" y1="18" x2="21" y2="18" data-v-25f7854d></line><line x1="3" y1="6" x2="3.01" y2="6" data-v-25f7854d></line><line x1="3" y1="12" x2="3.01" y2="12" data-v-25f7854d></line><line x1="3" y1="18" x2="3.01" y2="18" data-v-25f7854d></line></svg></div>',1)),e("div",wo,[e("div",bo,j(g.name),1),e("div",_o,j(u(g.buildingId)),1)]),e("div",$o,[e("button",{class:"btn-icon sm",onClick:I=>C(g),"aria-label":"Remove from frequent"},a[1]||(a[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]),8,xo)])]))),128))]))])])]))}}),Do=O(Co,[["__scopeId","data-v-25f7854d"]]),Bo={class:"category-defaults-modal"},So={class:"modal-header"},Eo={class:"setting-scope"},Vo={for:"allItems",class:"scope-label"},Io={class:"scope-content"},Lo=["value","disabled"],Mo={key:0,class:"item-select"},jo=["value"],To={class:"locations-container"},Ao={class:"location-section"},Uo={class:"location-form"},No={class:"building-select"},qo=["value"],zo={key:0,class:"department-select"},Fo=["value"],Ho={key:0,class:"location-summary"},Ko={class:"summary-content"},Po={class:"summary-text"},Ro={class:"location-section"},Jo={class:"location-form"},Wo={class:"building-select"},Oo=["value"],Go={key:0,class:"department-select"},Qo=["value"],Xo={key:0,class:"location-summary"},Yo={class:"summary-content"},Zo={class:"summary-text"},en={key:0,class:"settings-summary"},tn={class:"summary-item-container"},on={key:0,class:"summary-item"},nn={key:1,class:"summary-item"},sn={key:0,class:"settings-note"},ln={key:1,class:"settings-note"},an={class:"modal-actions"},rn=["disabled"],dn=G({__name:"CategoryDefaultLocations",props:{category:{}},emits:["close","saved"],setup(P,{emit:x}){const r=P,S=x,s=W(),u=w(""),C=H(()=>s.jobCategories[r.category]||[]),v=w(""),a=w(""),g=w(""),I=w(""),A=H(()=>!!v.value&&!!a.value),$=H(()=>!!g.value&&!!I.value),y=H(()=>{if(!v.value)return"";const m=b.value.find(l=>l.id===v.value);return(m==null?void 0:m.name)||""}),L=H(()=>{if(!v.value||!a.value)return"";const m=b.value.find(n=>n.id===v.value);if(!m)return"";const l=m.departments.find(n=>n.id===a.value);return(l==null?void 0:l.name)||""}),D=H(()=>{if(!g.value)return"";const m=b.value.find(l=>l.id===g.value);return(m==null?void 0:m.name)||""}),f=H(()=>{if(!g.value||!I.value)return"";const m=b.value.find(n=>n.id===g.value);if(!m)return"";const l=m.departments.find(n=>n.id===I.value);return(l==null?void 0:l.name)||""}),b=H(()=>s.buildings),p=H(()=>{if(!v.value)return[];const m=b.value.find(l=>l.id===v.value);return m?m.departments:[]}),z=H(()=>{if(!g.value)return[];const m=b.value.find(l=>l.id===g.value);return m?m.departments:[]}),M=()=>{let m;u.value&&(m=s.getJobCategoryDefault(r.category,u.value)),m||(m=s.getJobCategoryDefault(r.category)),m&&(m.itemType&&(u.value=m.itemType),m.fromBuildingId&&(v.value=m.fromBuildingId,m.fromLocationId&&(a.value=m.fromLocationId)),m.toBuildingId&&(g.value=m.toBuildingId,m.toLocationId&&(I.value=m.toLocationId)))},R=()=>{a.value=""},X=()=>{I.value=""},Y=()=>{const m={category:r.category};if(u.value&&(m.itemType=u.value),v.value&&(m.fromBuildingId=v.value,a.value)){m.fromLocationId=a.value;const l=b.value.find(n=>n.id===v.value);l&&l.departments.some(n=>n.id===a.value)&&(m.fromLocationType="department")}if(g.value&&(m.toBuildingId=g.value,I.value)){m.toLocationId=I.value;const l=b.value.find(n=>n.id===g.value);l&&l.departments.some(n=>n.id===I.value)&&(m.toLocationType="department")}if(!v.value&&!g.value){alert("Please set at least one location (From or To)");return}s.setJobCategoryDefault(m),S("saved"),S("close")},Q=()=>{v.value="",a.value="",g.value="",I.value="",u.value?s.deleteJobCategoryDefault(r.category,u.value):s.deleteJobCategoryDefault(r.category),S("saved"),S("close")},Z=()=>{S("close")};return ne(()=>{M()}),(m,l)=>(o(),t("div",Bo,[e("div",So,[e("h3",null,"Default Locations for "+j(m.category),1),l[7]||(l[7]=e("p",{class:"modal-description"}," Set default origin and destination locations that will be applied when creating jobs ",-1))]),e("div",Eo,[e("div",{class:ie(["setting-scope-card",{active:!u.value}])},[V(e("input",{type:"radio",id:"allItems",value:"","onUpdate:modelValue":l[0]||(l[0]=n=>u.value=n),class:"scope-radio"},null,512),[[ue,u.value]]),e("label",Vo,[l[9]||(l[9]=re('<div class="scope-icon" data-v-e781ab21><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e781ab21><path d="M3 6h18" data-v-e781ab21></path><path d="M3 12h18" data-v-e781ab21></path><path d="M3 18h18" data-v-e781ab21></path></svg></div>',1)),e("div",Io,[l[8]||(l[8]=e("h4",null,"All Items",-1)),e("p",null,'Set defaults for all items in the "'+j(m.category)+'" category',1)])])],2),e("div",{class:ie(["setting-scope-card",{active:!!u.value}])},[V(e("input",{type:"radio",id:"specificItem",value:C.value[0]||"","onUpdate:modelValue":l[1]||(l[1]=n=>u.value=n),class:"scope-radio",disabled:!C.value.length},null,8,Lo),[[ue,u.value]]),l[10]||(l[10]=re('<label for="specificItem" class="scope-label" data-v-e781ab21><div class="scope-icon" data-v-e781ab21><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e781ab21><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z" data-v-e781ab21></path><line x1="4" y1="22" x2="4" y2="15" data-v-e781ab21></line></svg></div><div class="scope-content" data-v-e781ab21><h4 data-v-e781ab21>Specific Item</h4><p data-v-e781ab21>Set defaults for a specific item type only</p></div></label>',1)),u.value?(o(),t("div",Mo,[V(e("select",{"onUpdate:modelValue":l[2]||(l[2]=n=>u.value=n),class:"form-control"},[(o(!0),t(F,null,K(C.value,n=>(o(),t("option",{key:n,value:n},j(n),9,jo))),128))],512),[[ee,u.value]])])):k("",!0)],2)]),e("div",To,[e("div",Ao,[l[16]||(l[16]=e("h4",null,"From (Origin) Location",-1)),e("div",Uo,[e("div",No,[l[12]||(l[12]=e("label",{for:"fromBuilding"},"Building:",-1)),V(e("select",{id:"fromBuilding","onUpdate:modelValue":l[3]||(l[3]=n=>v.value=n),class:"form-control",onChange:R},[l[11]||(l[11]=e("option",{value:""},"No default building",-1)),(o(!0),t(F,null,K(b.value,n=>(o(),t("option",{key:n.id,value:n.id},j(n.name),9,qo))),128))],544),[[ee,v.value]])]),v.value?(o(),t("div",zo,[l[14]||(l[14]=e("label",{for:"fromDepartment"},"Department:",-1)),V(e("select",{id:"fromDepartment","onUpdate:modelValue":l[4]||(l[4]=n=>a.value=n),class:"form-control"},[l[13]||(l[13]=e("option",{value:""},"Select a department",-1)),(o(!0),t(F,null,K(p.value,n=>(o(),t("option",{key:n.id,value:n.id},j(n.name),9,Fo))),128))],512),[[ee,a.value]])])):k("",!0)]),A.value?(o(),t("div",Ho,[e("div",Ko,[l[15]||(l[15]=e("div",{class:"summary-icon from-icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("polyline",{points:"12 6 12 12 16 14"})])],-1)),e("div",Po,j(y.value)+" - "+j(L.value),1)])])):k("",!0)]),e("div",Ro,[l[22]||(l[22]=e("h4",null,"To (Destination) Location",-1)),e("div",Jo,[e("div",Wo,[l[18]||(l[18]=e("label",{for:"toBuilding"},"Building:",-1)),V(e("select",{id:"toBuilding","onUpdate:modelValue":l[5]||(l[5]=n=>g.value=n),class:"form-control",onChange:X},[l[17]||(l[17]=e("option",{value:""},"No default building",-1)),(o(!0),t(F,null,K(b.value,n=>(o(),t("option",{key:n.id,value:n.id},j(n.name),9,Oo))),128))],544),[[ee,g.value]])]),g.value?(o(),t("div",Go,[l[20]||(l[20]=e("label",{for:"toDepartment"},"Department:",-1)),V(e("select",{id:"toDepartment","onUpdate:modelValue":l[6]||(l[6]=n=>I.value=n),class:"form-control"},[l[19]||(l[19]=e("option",{value:""},"Select a department",-1)),(o(!0),t(F,null,K(z.value,n=>(o(),t("option",{key:n.id,value:n.id},j(n.name),9,Qo))),128))],512),[[ee,I.value]])])):k("",!0)]),$.value?(o(),t("div",Xo,[e("div",Yo,[l[21]||(l[21]=e("div",{class:"summary-icon to-icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e("circle",{cx:"12",cy:"10",r:"3"})])],-1)),e("div",Zo,j(D.value)+" - "+j(f.value),1)])])):k("",!0)])]),A.value||$.value?(o(),t("div",en,[l[25]||(l[25]=e("h4",{class:"summary-title"},"Current Settings Summary",-1)),e("div",tn,[A.value?(o(),t("div",on,[l[23]||(l[23]=e("strong",null,"From:",-1)),te(" "+j(y.value)+" - "+j(L.value),1)])):k("",!0),$.value?(o(),t("div",nn,[l[24]||(l[24]=e("strong",null,"To:",-1)),te(" "+j(D.value)+" - "+j(f.value),1)])):k("",!0)]),u.value?(o(),t("p",sn,' These defaults will only apply when "'+j(u.value)+'" is selected. ',1)):(o(),t("p",ln,' These defaults will apply to all items in the "'+j(m.category)+'" category. ',1))])):k("",!0),e("div",an,[A.value||$.value?(o(),t("button",{key:0,class:"btn-danger",onClick:Q}," Clear Defaults ")):k("",!0),e("button",{class:"btn-secondary",onClick:Z}," Cancel "),e("button",{class:"btn-primary",onClick:Y,disabled:!A.value&&!$.value}," Save Defaults ",8,rn)])]))}}),un=O(dn,[["__scopeId","data-v-e781ab21"]]),vn={class:"settings-section"},cn={class:"setting-group"},pn={class:"job-categories"},mn={class:"category-header"},fn={class:"category-info"},gn={key:0,class:"category-name"},yn=["onKeyup"],kn={class:"category-actions"},hn=["onClick"],wn=["onClick"],bn=["onClick"],_n=["onClick"],$n={class:"item-list"},xn={class:"item-info"},Cn={key:0},Dn=["onKeyup"],Bn={class:"item-actions"},Sn=["onClick"],En=["onClick"],Vn=["onClick"],In={class:"add-item-container"},Ln=["onUpdate:modelValue","onKeyup"],Mn=["onClick","disabled"],jn={class:"add-category"},Tn=["disabled"],An={class:"modal-content default-locations-modal"},Un=G({__name:"JobCategories",setup(P){const x=W(),{jobCategories:r,updateSettings:S}=x,s=H(()=>r),u=w(!1),C=w("");w(""),w(null);const v=w(""),a=w(null),g=w(""),I=w(null),A=w(null),$=w(null),y=w(""),L=w(null),D=de({});for(const n in r)D[n]||(D[n]="");const f=()=>{const n=v.value.trim();n&&!(n in r)&&x.addCategory(n)&&(D[n]="",v.value="")},b=n=>{a.value=n,g.value=n,oe(()=>{var c;(c=I.value)==null||c.focus()})},p=n=>{const c=g.value.trim();c&&x.updateCategory(n,c)&&(D[n]!==void 0&&(D[c]=D[n],delete D[n]),a.value=null)},z=()=>{a.value=null,g.value=""},M=n=>{confirm(`Are you sure you want to remove category "${n}" and all its items?`)&&(x.deleteCategory(n),delete D[n])},R=n=>{var q;const c=(q=D[n])==null?void 0:q.trim();if(c&&n&&typeof r=="object"){const B=r[n];Array.isArray(B)&&!B.includes(c)&&(x.addItemType(n,c),D[n]="")}},X=(n,c)=>{$.value=n,A.value=c,y.value=String(c),oe(()=>{var q;(q=L.value)==null||q.focus()})},Y=(n,c)=>{const q=y.value.trim();q&&x.updateItemType(n,String(c),q)&&(A.value=null,$.value=null)},Q=()=>{A.value=null,$.value=null,y.value=""},Z=(n,c)=>{confirm(`Are you sure you want to remove item "${c}" from category "${n}"?`)&&x.deleteItemType(n,String(c))},m=n=>{C.value=n,u.value=!0},l=()=>{console.log(`Default locations for ${C.value} saved`)};return(n,c)=>(o(),t("section",vn,[c[14]||(c[14]=e("h2",null,"Job Categories",-1)),e("div",cn,[e("div",pn,[(o(!0),t(F,null,K(s.value,(q,B)=>(o(),t("div",{key:B,class:"category-section"},[e("div",mn,[e("div",fn,[a.value!==B?(o(),t("span",gn,j(B),1)):V((o(),t("input",{key:1,type:"text","onUpdate:modelValue":c[0]||(c[0]=T=>g.value=T),onKeyup:[N(T=>p(B),["enter"]),N(z,["esc"])],ref_for:!0,ref_key:"categoryEditInput",ref:I,class:"edit-input"},null,40,yn)),[[U,g.value]])]),e("div",kn,[a.value!==B?(o(),t("button",{key:0,class:"btn-icon location-defaults",onClick:T=>m(B),"aria-label":"Set default locations",title:"Set default locations"},c[5]||(c[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e("circle",{cx:"12",cy:"10",r:"3"})],-1)]),8,hn)):k("",!0),a.value!==B?(o(),t("button",{key:1,class:"btn-icon",onClick:T=>b(B),"aria-label":"Edit category"},c[6]||(c[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)]),8,wn)):k("",!0),a.value===B?(o(),t("button",{key:2,class:"btn-icon",onClick:T=>p(B),"aria-label":"Save category"},c[7]||(c[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e("polyline",{points:"17 21 17 13 7 13 7 21"}),e("polyline",{points:"7 3 7 8 15 8"})],-1)]),8,bn)):k("",!0),a.value===B?(o(),t("button",{key:3,class:"btn-icon",onClick:z,"aria-label":"Cancel edit"},c[8]||(c[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))):k("",!0),a.value!==B?(o(),t("button",{key:4,class:"btn-icon",onClick:T=>M(B),"aria-label":"Remove category"},c[9]||(c[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M3 6h18"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,_n)):k("",!0)])]),e("ul",$n,[(o(!0),t(F,null,K(q,(T,_)=>(o(),t("li",{key:_,class:"item"},[e("div",xn,[A.value!==T||$.value!==B?(o(),t("span",Cn,j(T),1)):V((o(),t("input",{key:1,type:"text","onUpdate:modelValue":c[1]||(c[1]=i=>y.value=i),onKeyup:[N(i=>Y(B,T),["enter"]),N(Q,["esc"])],ref_for:!0,ref_key:"itemTypeEditInput",ref:L,class:"edit-input"},null,40,Dn)),[[U,y.value]])]),e("div",Bn,[A.value!==T||$.value!==B?(o(),t("button",{key:0,class:"btn-icon sm",onClick:i=>X(B,T),"aria-label":"Edit item type"},c[10]||(c[10]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)]),8,Sn)):k("",!0),A.value===T&&$.value===B?(o(),t("button",{key:1,class:"btn-icon sm",onClick:i=>Y(B,T),"aria-label":"Save item type"},c[11]||(c[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e("polyline",{points:"17 21 17 13 7 13 7 21"}),e("polyline",{points:"7 3 7 8 15 8"})],-1)]),8,En)):k("",!0),A.value===T&&$.value===B?(o(),t("button",{key:2,class:"btn-icon sm",onClick:Q,"aria-label":"Cancel edit"},c[12]||(c[12]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))):k("",!0),A.value!==T||$.value!==B?(o(),t("button",{key:3,class:"btn-icon sm",onClick:i=>Z(B,T),"aria-label":"Remove item type"},c[13]||(c[13]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]),8,Vn)):k("",!0)])]))),128))]),e("div",In,[V(e("input",{type:"text","onUpdate:modelValue":T=>D[B]=T,placeholder:"Enter new item type",onKeyup:N(T=>R(B),["enter"]),class:"add-input"},null,40,Ln),[[U,D[B]]]),e("button",{class:"btn-primary",onClick:T=>R(B),disabled:!D[B]||!D[B].trim()}," Add ",8,Mn)])]))),128)),e("div",jn,[V(e("input",{type:"text","onUpdate:modelValue":c[2]||(c[2]=q=>v.value=q),placeholder:"Enter new category name",onKeyup:N(f,["enter"])},null,544),[[U,v.value]]),e("button",{class:"btn-primary",onClick:f,disabled:!v.value.trim()}," Add Category ",8,Tn)])])]),u.value?(o(),t("div",{key:0,class:"modal-backdrop",onClick:c[4]||(c[4]=ae(q=>u.value=!1,["self"]))},[e("div",An,[J(un,{category:C.value,onClose:c[3]||(c[3]=q=>u.value=!1),onSaved:l},null,8,["category"])])])):k("",!0)]))}}),Nn=O(Un,[["__scopeId","data-v-4bd10fdc"]]),qn={class:"settings-view"},zn={key:0,class:"settings-loading"},Fn={class:"tabs-container"},Hn={class:"tabs"},Kn=["onClick"],Pn={class:"tab-content"},Rn={key:0,class:"tab-pane"},Jn={key:1,class:"tab-pane"},Wn={key:2,class:"tab-pane"},On={key:3,class:"tab-pane"},Gn=G({__name:"SettingsView",setup(P){ge("navigate");const x=[{id:"app",name:"App Settings"},{id:"staff",name:"Staff"},{id:"locations",name:"Locations"},{id:"tasks",name:"Task Types"}],r=W(),S=w(!0),s=w("app");return ne(async()=>{try{await r.initialize()}catch(u){console.error("Failed to load settings:",u)}finally{S.value=!1}}),(u,C)=>(o(),t("main",qn,[S.value?(o(),t("div",zn,[J(pe,{message:"Loading settings data..."})])):(o(),t(F,{key:1},[C[0]||(C[0]=e("header",{class:"top-header"},[e("h1",null,"Settings")],-1)),e("div",Fn,[e("div",Hn,[(o(),t(F,null,K(x,v=>e("button",{key:v.id,class:ie(["tab",{active:s.value===v.id}]),onClick:a=>s.value=v.id},j(v.name),11,Kn)),64))])]),e("section",Pn,[s.value==="app"?(o(),t("div",Rn,[J(lt)])):k("",!0),s.value==="staff"?(o(),t("div",Jn,[J(bt),J(Ut)])):k("",!0),s.value==="locations"?(o(),t("div",Wn,[J(Do),J(mo)])):k("",!0),s.value==="tasks"?(o(),t("div",On,[J(Nn)])):k("",!0)])],64))]))}}),Zn=O(Gn,[["__scopeId","data-v-1a50ba4e"]]);export{Zn as default};
