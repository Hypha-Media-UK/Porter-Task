import{u as A,_ as N,f as b,b as k,c as L}from"./index-DlOD_Yz9.js";import{a as B,c as p,b as l,f as T,e as t,n as u,t as i,o as r,r as _,g as M,w as R,h as E,x as h,C as P,F as z,B as F,i as O}from"./vendor-DszYqHt7.js";const q={class:"tab-navigation"},G={class:"nav-tab-icon"},J={key:0,class:"badge-count","aria-label":"{{ pendingTasksCount }} pending tasks"},K=B({__name:"TabNavigation",props:{currentRoute:{}},emits:["navigate"],setup(y,{emit:c}){const v=c,m=A(),w=p(()=>m.isShiftActive),g=p(()=>m.currentShift?m.currentShift.tasks.filter(d=>d.status==="Pending").length:0);function f(d,e){v("navigate",d,e)}return(d,e)=>(r(),l("nav",q,[w.value?(r(),l("button",{key:0,class:u(["nav-tab",{active:d.currentRoute==="tasks"}]),onClick:e[0]||(e[0]=o=>f("tasks")),"aria-label":"Tasks"},[t("div",G,[e[4]||(e[4]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),t("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"}),t("path",{d:"M9 14l2 2 4-4"})],-1)),g.value>0?(r(),l("span",J,i(g.value),1)):T("",!0)]),e[5]||(e[5]=t("span",null,"Tasks",-1))],2)):T("",!0),t("button",{class:u(["nav-tab",{active:d.currentRoute==="home"}]),onClick:e[1]||(e[1]=o=>f("home")),"aria-label":"Home"},e[6]||(e[6]=[t("div",{class:"nav-tab-icon"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),t("polyline",{points:"9 22 9 12 15 12 15 22"})])],-1),t("span",null,"Home",-1)]),2),t("button",{class:u(["nav-tab",{active:d.currentRoute==="archive"}]),onClick:e[2]||(e[2]=o=>f("archive")),"aria-label":"Archive"},e[7]||(e[7]=[t("div",{class:"nav-tab-icon"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),t("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})])],-1),t("span",null,"Archive",-1)]),2),t("button",{class:u(["nav-tab",{active:d.currentRoute==="settings"}]),onClick:e[3]||(e[3]=o=>f("settings")),"aria-label":"Settings"},e[8]||(e[8]=[t("div",{class:"nav-tab-icon"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"12",cy:"12",r:"3"}),t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})])],-1),t("span",null,"Settings",-1)]),2)]))}}),Q=N(K,[["__scopeId","data-v-b4589c52"]]),U={class:"shift-detail-view"},W={key:0,class:"loading-state"},X={key:1,class:"empty-state"},Y={key:2,class:"shift-details"},Z={class:"shift-card"},tt={class:"shift-header"},et={class:"shift-date"},st={class:"shift-info"},at={class:"info-row"},it={class:"info-item"},nt={class:"value"},ot={class:"info-item"},lt={class:"value"},rt={class:"info-item"},dt={class:"value"},ct={class:"info-item"},vt={class:"value"},ut={class:"stats-row"},ht={class:"stat-item"},ft={class:"stat-value"},mt={class:"stat-item"},pt={class:"stat-value"},gt={class:"stat-item"},kt={class:"stat-value"},wt={class:"tasks-section"},bt={class:"tasks-header"},_t={class:"tabs"},Tt={key:0,class:"empty-tasks"},yt={key:1,class:"tasks-list"},Ct=["onClick"],St={class:"task-info"},xt={class:"task-header"},Dt={class:"task-type"},$t={class:"task-time"},At={class:"task-journey"},Nt={class:"from-location"},Bt={class:"to-location"},Vt={key:0,class:"task-completion"},jt=B({__name:"ShiftDetailView",props:{shiftId:{}},setup(y){const c=y,v=O("navigate"),m=A(),{getShift:w,isLoading:g,deleteShift:f,reopenShift:d}=m;_(!1);const e=_(null),o=_("all"),C=async()=>{if(c.shiftId)try{const a=await w(c.shiftId);e.value=a||null}catch(a){console.error("Error loading shift details:",a),e.value=null}},S=p(()=>e.value?e.value.tasks.filter(a=>a.status==="Completed").length:0),x=p(()=>e.value?e.value.tasks.filter(a=>a.status==="Pending").length:0),D=p(()=>e.value?o.value==="all"?[...e.value.tasks].sort((a,s)=>new Date(s.receivedTime).getTime()-new Date(a.receivedTime).getTime()):o.value==="completed"?e.value.tasks.filter(a=>a.status==="Completed").sort((a,s)=>{const n=a.completedTime?new Date(a.completedTime).getTime():0;return(s.completedTime?new Date(s.completedTime).getTime():0)-n}):e.value.tasks.filter(a=>a.status==="Pending").sort((a,s)=>new Date(s.receivedTime).getTime()-new Date(a.receivedTime).getTime()):[]),$=()=>{v&&v("archive")},V=()=>{!e.value||!c.shiftId||confirm(`Are you sure you want to delete this shift from ${b(new Date(e.value.date))}?`)&&(f(c.shiftId),$())},j=()=>{if(!(!e.value||!c.shiftId))try{confirm(`Are you sure you want to reopen this shift from ${b(new Date(e.value.date))}?`)&&(d(c.shiftId),v&&v("home"))}catch(a){a instanceof Error?alert(a.message):alert("Could not reopen shift. Another shift might be active.")}},I=a=>{v&&v("taskForm",{taskId:a})};return M(C),R(()=>c.shiftId,C),(a,s)=>(r(),l("main",U,[h(g)?(r(),l("section",W,s[3]||(s[3]=[t("div",{class:"spinner"},null,-1),t("p",null,"Loading shift details...",-1)]))):e.value?(r(),l("section",Y,[t("article",Z,[t("header",tt,[t("div",et,i(h(b)(new Date(e.value.date))),1),t("div",{class:u(["shift-type",e.value.type.toLowerCase()])},i(e.value.type)+" Shift ",3)]),t("div",{class:"shift-actions"},[t("button",{class:"btn-primary btn-reopen-shift",onClick:j}," Reopen Shift "),t("button",{class:"btn-danger btn-delete-shift",onClick:V}," Delete Shift ")]),t("div",st,[t("div",at,[t("div",it,[s[5]||(s[5]=t("span",{class:"label"},"Supervisor",-1)),t("span",nt,i(e.value.supervisor),1)]),t("div",ot,[s[6]||(s[6]=t("span",{class:"label"},"Start Time",-1)),t("span",lt,i(h(k)(new Date(e.value.startTime))),1)]),t("div",rt,[s[7]||(s[7]=t("span",{class:"label"},"End Time",-1)),t("span",dt,i(e.value.endTime?h(k)(new Date(e.value.endTime)):"Ongoing"),1)]),t("div",ct,[s[8]||(s[8]=t("span",{class:"label"},"Duration",-1)),t("span",vt,i(h(L)(e.value.startTime,e.value.endTime||"")),1)])])]),t("div",ut,[t("div",ht,[t("div",ft,i(e.value.tasks.length),1),s[9]||(s[9]=t("div",{class:"stat-label"},"Total Tasks",-1))]),t("div",mt,[t("div",pt,i(S.value),1),s[10]||(s[10]=t("div",{class:"stat-label"},"Completed",-1))]),t("div",gt,[t("div",kt,i(x.value),1),s[11]||(s[11]=t("div",{class:"stat-label"},"Pending",-1))])])]),t("section",wt,[t("header",bt,[s[12]||(s[12]=t("h2",null,"Tasks",-1)),t("nav",_t,[t("button",{class:u(["tab-btn",{active:o.value==="all"}]),onClick:s[0]||(s[0]=n=>o.value="all")}," All ("+i(e.value.tasks.length)+") ",3),t("button",{class:u(["tab-btn",{active:o.value==="completed"}]),onClick:s[1]||(s[1]=n=>o.value="completed")}," Completed ("+i(S.value)+") ",3),t("button",{class:u(["tab-btn",{active:o.value==="pending"}]),onClick:s[2]||(s[2]=n=>o.value="pending")}," Pending ("+i(x.value)+") ",3)])]),D.value.length===0?(r(),l("div",Tt,[t("p",null,"No "+i(o.value==="all"?"":o.value)+" tasks for this shift.",1)])):(r(),l("ul",yt,[(r(!0),l(z,null,F(D.value,n=>(r(),l("li",{key:n.id,class:"task-item"},[t("article",{class:"shift-detail-task",onClick:H=>I(n.id)},[t("div",{class:u(["task-status",n.status.toLowerCase()])},null,2),t("div",St,[t("div",xt,[t("div",Dt,i(n.jobCategory)+" - "+i(n.itemType),1),t("div",$t,i(h(k)(new Date(n.receivedTime))),1)]),t("div",At,[t("span",Nt,i(n.fromLocation.displayName),1),s[13]||(s[13]=t("span",{class:"journey-arrow"},"â†’",-1)),t("span",Bt,i(n.toLocation.displayName),1)]),n.status==="Completed"&&n.completedTime?(r(),l("div",Vt," Completed: "+i(h(k)(new Date(n.completedTime))),1)):T("",!0)]),s[14]||(s[14]=t("button",{class:"edit-button","aria-label":"Edit task"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]),t("span",null,"Edit")],-1))],8,Ct)]))),128))]))])])):(r(),l("section",X,[s[4]||(s[4]=P('<div class="empty-icon" data-v-c77e8fe4><svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" data-v-c77e8fe4><circle cx="12" cy="12" r="10" data-v-c77e8fe4></circle><line x1="12" y1="8" x2="12" y2="12" data-v-c77e8fe4></line><line x1="12" y1="16" x2="12.01" y2="16" data-v-c77e8fe4></line></svg></div><h3 data-v-c77e8fe4>Shift Not Found</h3><p data-v-c77e8fe4>The shift you&#39;re looking for doesn&#39;t exist or has been deleted.</p>',3)),t("button",{class:"btn-primary",onClick:$}," Back to Archive ")])),E(Q,{"current-route":"archive",onNavigate:h(v)},null,8,["onNavigate"])]))}}),Lt=N(jt,[["__scopeId","data-v-c77e8fe4"]]);export{Lt as default};
