import{a as Q,c as f,b as o,f as P,e as t,n as M,t as r,o as n,r as $,q as et,H as W,F as A,C as S,D as C,E as q,G as nt,h as ot,w as it,l as at,k as lt,A as Z,B as tt,i as rt}from"./vendor-d6AZ6u8N.js";import{u as X,_ as Y,a as st,f as H,b as R,c as dt}from"./index-DNYSQN-_.js";import{P as ut}from"./PorterAssignmentModal-BCJixM4-.js";const ct={class:"tab-navigation"},vt={class:"nav-tab-icon"},mt={key:0,class:"badge-count","aria-label":"{{ pendingTasksCount }} pending tasks"},ht=Q({__name:"TabNavigation",props:{currentRoute:{}},emits:["navigate"],setup(G,{emit:p}){const _=p,x=X(),I=f(()=>x.isShiftActive),D=f(()=>x.currentShift?x.currentShift.tasks.filter(g=>g.status==="Pending").length:0);function k(g,c){_("navigate",g,c)}return(g,c)=>(n(),o("nav",ct,[I.value?(n(),o("button",{key:0,class:M(["nav-tab",{active:g.currentRoute==="tasks"}]),onClick:c[0]||(c[0]=w=>k("tasks")),"aria-label":"Tasks"},[t("div",vt,[c[4]||(c[4]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),t("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"}),t("path",{d:"M9 14l2 2 4-4"})],-1)),D.value>0?(n(),o("span",mt,r(D.value),1)):P("",!0)]),c[5]||(c[5]=t("span",null,"Tasks",-1))],2)):P("",!0),t("button",{class:M(["nav-tab",{active:g.currentRoute==="home"}]),onClick:c[1]||(c[1]=w=>k("home")),"aria-label":"Home"},c[6]||(c[6]=[t("div",{class:"nav-tab-icon"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),t("polyline",{points:"9 22 9 12 15 12 15 22"})])],-1),t("span",null,"Home",-1)]),2),t("button",{class:M(["nav-tab",{active:g.currentRoute==="archive"}]),onClick:c[2]||(c[2]=w=>k("archive")),"aria-label":"Archive"},c[7]||(c[7]=[t("div",{class:"nav-tab-icon"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),t("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})])],-1),t("span",null,"Archive",-1)]),2),t("button",{class:M(["nav-tab",{active:g.currentRoute==="settings"}]),onClick:c[3]||(c[3]=w=>k("settings")),"aria-label":"Settings"},c[8]||(c[8]=[t("div",{class:"nav-tab-icon"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"12",cy:"12",r:"3"}),t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})])],-1),t("span",null,"Settings",-1)]),2)]))}}),pt=Y(ht,[["__scopeId","data-v-b4589c52"]]),gt={class:"porter-assignments"},ft={class:"section-header"},kt={key:0,style:{"font-size":"10px",overflow:"auto","max-height":"100px",background:"#f5f5f5",padding:"5px","margin-bottom":"10px"}},wt={key:0,class:"empty-state"},yt={key:1,class:"empty-state"},_t={key:2,class:"departments-grid"},bt={class:"department-name"},Tt={class:"department-count"},Ct={class:"department-content"},$t={key:0,class:"empty-assignments"},At={key:1,class:"assignment-list"},St={class:"assignment-info"},xt={class:"assignment-porter"},Dt={class:"assignment-time"},Pt={key:0,class:"assignment-notes"},Mt={class:"assignment-actions"},It=["onClick"],Ht=["onClick"],Nt={key:3,class:"timeline-section"},Vt={class:"section-header"},Bt={class:"time-now-indicator"},Et={class:"timeline-container"},jt={class:"timeline"},Ft={class:"timeline-hours"},Rt={class:"timeline-porter-name"},Lt={class:"timeline-assignments"},zt=["onClick"],Ot={class:"modal-content"},Ut={class:"modal-body"},Wt=Q({__name:"PorterAssignmentManager",setup(G){const p=X(),_=st(),x=f(()=>p.porterAssignments),I=f(()=>_.designationDepartments),D=f(()=>{var s;const i=((s=p.currentShift)==null?void 0:s.assignedPorters)||[];return console.log("PorterAssignmentManager - Assigned porters:",i),i}),k=$(!1),g=$(void 0),c=$(!1),w=$(void 0),J=$(!0),L=f(()=>{const i=[];for(let u=6;u<=23;u++)i.push({hour:u,label:`${u%12===0?12:u%12}${u<12?"am":"pm"}`});for(let u=0;u<6;u++)i.push({hour:u,label:`${u%12===0?12:u%12}${u<12?"am":"pm"}`});return i}),b=f(()=>I.value.map(i=>{const s=x.value.filter(h=>h.departmentId===i.id);return{...i,assignments:s}}).sort((i,s)=>s.assignments.length!==i.assignments.length?s.assignments.length-i.assignments.length:i.name.localeCompare(s.name))),z=f(()=>D.value.map(s=>({id:s,assignments:x.value.filter(h=>h.porterId===s)})).filter(s=>s.assignments.length>0));function d(i){const s=new Date(i),h=s.getHours(),u=s.getMinutes(),v=h*60+u,m=24*60;return v/m*100}function y(i,s){const h=new Date(i);let u;if(s)u=new Date(s);else{const a=p.currentShift;a&&a.endTime?u=new Date(a.endTime):(u=new Date(h),u.setHours(u.getHours()+2))}const v=h.getHours()*60+h.getMinutes();let l=u.getHours()*60+u.getMinutes()-v;l<0&&(l+=24*60);const e=24*60;return l/e*100}function N(){const i=new Date,s=i.getHours(),h=i.getMinutes(),u=s*60+h,v=24*60;return u/v*100}function E(i){const s=I.value.find(h=>h.id===i);return s?s.name:"Unknown"}function O(i){const s=I.value.find(h=>h.id===i);return s&&s.color?s.color:"#cccccc"}function j(i){g.value=i,k.value=!0}function U(i){try{i.id?p.updatePorterAssignment(i.id,{departmentId:i.departmentId,startTime:i.startTime,endTime:i.endTime,notes:i.notes}):p.addPorterAssignment({porterId:i.porterId,departmentId:i.departmentId,startTime:i.startTime,endTime:i.endTime,notes:i.notes}),k.value=!1,g.value=void 0}catch(s){console.error("Error saving assignment:",s),alert("Failed to save assignment: "+(s instanceof Error?s.message:String(s)))}}function T(){k.value=!1,g.value=void 0}function V(i){w.value=i,c.value=!0}function F(){if(w.value)try{p.removePorterAssignment(w.value.id),c.value=!1,w.value=void 0}catch(i){console.error("Error deleting assignment:",i),alert("Failed to delete assignment: "+(i instanceof Error?i.message:String(i)))}}function B(){c.value=!1,w.value=void 0}return(i,s)=>{var h,u;return n(),o("div",gt,[t("div",ft,[s[3]||(s[3]=t("h3",null,"Department Assignments",-1)),J.value?(n(),o("pre",kt,"Assigned Porters: "+r(JSON.stringify(D.value))+`
`,1)):P("",!0),t("button",{class:"btn-primary add-btn",onClick:s[0]||(s[0]=v=>k.value=!0)},s[2]||(s[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),W(" Assign Porter ")]))]),D.value.length===0?(n(),o("div",wt,s[4]||(s[4]=[t("p",null,"No porters have been assigned to this shift yet.",-1),t("p",null,"Add porters to the shift first, then you can assign them to departments.",-1)]))):x.value.length===0?(n(),o("div",yt,[s[5]||(s[5]=t("p",null,"No department assignments have been created yet.",-1)),t("button",{class:"btn-primary",onClick:s[1]||(s[1]=v=>k.value=!0)}," Create First Assignment ")])):(n(),o("div",_t,[(n(!0),o(A,null,S(b.value,v=>(n(),o("div",{key:v.id,class:"department-card"},[t("div",{class:"department-header",style:q({backgroundColor:v.color?`${v.color}22`:"#f0f0f0",color:v.color||"#666"})},[t("span",bt,r(v.name),1),t("span",Tt,r(v.assignments.length)+" Porter"+r(v.assignments.length!==1?"s":""),1)],4),t("div",Ct,[v.assignments.length===0?(n(),o("div",$t,s[6]||(s[6]=[t("p",null,"No porters assigned to this department",-1)]))):(n(),o("div",At,[(n(!0),o(A,null,S(v.assignments,m=>(n(),o("div",{key:m.id,class:"assignment-item"},[t("div",St,[t("div",xt,r(m.porterId),1),t("div",Dt,r(C(H)(new Date(m.startTime)))+" "+r(m.endTime?` - ${C(H)(new Date(m.endTime))}`:"")+" "+r(m.endTime?"":"(until end of shift)"),1),m.notes?(n(),o("div",Pt,r(m.notes),1)):P("",!0)]),t("div",Mt,[t("button",{class:"btn-icon",onClick:l=>j(m),title:"Edit assignment"},s[7]||(s[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)]),8,It),t("button",{class:"btn-icon",onClick:l=>V(m),title:"Delete assignment"},s[8]||(s[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("polyline",{points:"3 6 5 6 21 6"}),t("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,Ht)])]))),128))]))])]))),128))])),x.value.length>0?(n(),o("div",Nt,[t("div",Vt,[s[9]||(s[9]=t("h3",null,"Timeline View",-1)),t("span",Bt," Current Time: "+r(C(H)(new Date)),1)]),t("div",Et,[t("div",jt,[t("div",Ft,[(n(!0),o(A,null,S(L.value,v=>(n(),o("div",{key:v.label,class:"timeline-hour",style:q({width:`${100/L.value.length}%`})},r(v.label),5))),128))]),(n(!0),o(A,null,S(z.value,v=>(n(),o("div",{key:v.id,class:"timeline-porter"},[t("div",Rt,r(v.id),1),t("div",Lt,[(n(!0),o(A,null,S(v.assignments,m=>(n(),o("div",{key:m.id,class:"timeline-assignment",style:q({left:`${d(m.startTime)}%`,width:`${y(m.startTime,m.endTime)}%`,backgroundColor:O(m.departmentId)}),onClick:l=>j(m)},r(E(m.departmentId)),13,zt))),128))])]))),128)),t("div",{class:"current-time-marker",style:q({left:`${N()}%`})},null,4)])])])):P("",!0),k.value?(n(),et(ut,{key:4,editing:!!g.value,assignment:g.value,porters:D.value,onSave:U,onCancel:T},null,8,["editing","assignment","porters"])):P("",!0),c.value?(n(),o("div",{key:5,class:"modal-backdrop",onClick:nt(B,["self"])},[t("div",Ot,[t("div",{class:"modal-header"},[s[11]||(s[11]=t("h3",null,"Delete Assignment",-1)),t("button",{class:"btn-close",onClick:B},s[10]||(s[10]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),t("div",Ut,[t("p",null,[s[12]||(s[12]=W(" Are you sure you want to remove ")),t("strong",null,r((h=w.value)==null?void 0:h.porterId),1),s[13]||(s[13]=W(" from the ")),t("strong",null,r(E(((u=w.value)==null?void 0:u.departmentId)||"")),1),s[14]||(s[14]=W(" department? "))])]),t("div",{class:"modal-footer"},[t("button",{class:"btn-secondary",onClick:B},"Cancel"),t("button",{class:"btn-danger",onClick:F},"Delete")])])])):P("",!0)])}}}),qt=Y(Wt,[["__scopeId","data-v-8d0214a2"]]),Gt={class:"shift-detail-view"},Jt={key:0,class:"loading-state"},Kt={key:1,class:"empty-state"},Qt={key:2,class:"shift-details"},Xt={class:"shift-card"},Yt={class:"shift-header"},Zt={class:"shift-date"},te={class:"shift-info"},ee={class:"info-row"},se={class:"info-item"},ne={class:"value"},oe={class:"info-item"},ie={class:"value"},ae={class:"info-item"},le={class:"value"},re={class:"info-item"},de={class:"value"},ue={key:0,class:"porters-section"},ce={class:"porters-assignment"},ve={class:"porter-selection"},me=["disabled"],he=["value"],pe=["disabled"],ge={key:0,class:"empty-porters"},fe={key:1,class:"assigned-porters"},ke={class:"porter-tags"},we={class:"porter-name"},ye=["onClick"],_e={key:1,class:"porters-section"},be={class:"porter-actions"},Te={key:0,class:"porters-assignment"},Ce={class:"porter-selection"},$e=["disabled"],Ae=["value"],Se=["disabled"],xe={key:0,class:"empty-porters"},De={key:1,class:"assigned-porters with-controls"},Pe={class:"porter-tags"},Me={class:"porter-name"},Ie=["onClick"],He={key:1,class:"assigned-porters"},Ne={class:"porter-tags"},Ve={class:"porter-name"},Be={key:2,class:"empty-porters"},Ee={key:2,class:"department-assignments-section"},je={class:"stats-row"},Fe={class:"stat-item"},Re={class:"stat-value"},Le={class:"stat-item"},ze={class:"stat-value"},Oe={class:"stat-item"},Ue={class:"stat-value"},We={class:"tasks-section"},qe={class:"tasks-header"},Ge={class:"tabs"},Je={key:0,class:"empty-tasks"},Ke={key:1,class:"tasks-list"},Qe=["onClick"],Xe={class:"task-info"},Ye={class:"task-header"},Ze={class:"task-type"},ts={class:"task-time"},es={class:"task-journey"},ss={class:"from-location"},ns={class:"to-location"},os={key:0,class:"task-completion"},is=Q({__name:"ShiftDetailView",props:{shiftId:{}},setup(G){const p=G,_=rt("navigate"),x=X(),I=st(),{getShift:D,isLoading:k,deleteShift:g,reopenShift:c,addPorterToShift:w,removePorterFromShift:J}=x,{porters:L}=I;$(!1);const b=$(""),z=$(!1),d=$(null),y=$("all"),N=$(0),E=async()=>{if(p.shiftId)try{const l=await D(p.shiftId);d.value=l||null}catch(l){console.error("Error loading shift details:",l),d.value=null}},O=f(()=>d.value?d.value.tasks.filter(l=>l.status==="Completed").length:0),j=f(()=>d.value?d.value.tasks.filter(l=>l.status==="Pending").length:0),U=f(()=>d.value?y.value==="all"?[...d.value.tasks].sort((l,e)=>new Date(e.receivedTime).getTime()-new Date(l.receivedTime).getTime()):y.value==="completed"?d.value.tasks.filter(l=>l.status==="Completed").sort((l,e)=>{const a=l.completedTime?new Date(l.completedTime).getTime():0;return(e.completedTime?new Date(e.completedTime).getTime():0)-a}):d.value.tasks.filter(l=>l.status==="Pending").sort((l,e)=>new Date(e.receivedTime).getTime()-new Date(l.receivedTime).getTime()):[]),T=f(()=>!d.value||!d.value.assignedPorters?[]:d.value.assignedPorters),V=f(()=>L.filter(l=>!T.value.includes(l))),F=f(()=>d.value&&!d.value.endTime),B=()=>{_&&_("archive")},i=()=>{!d.value||!p.shiftId||confirm(`Are you sure you want to delete this shift from ${R(new Date(d.value.date))}?`)&&(g(p.shiftId),B())},s=async()=>{if(!p.shiftId)return;const l=await D(p.shiftId);d.value=l||null,console.log("Shift refreshed:",d.value)},h=()=>{if(!(!d.value||!p.shiftId))try{confirm(`Are you sure you want to reopen this shift from ${R(new Date(d.value.date))}?`)&&(c(p.shiftId),_&&_("home"))}catch(l){l instanceof Error?alert(l.message):alert("Could not reopen shift. Another shift might be active.")}},u=l=>{_&&_("taskForm",{taskId:l})},v=async()=>{if(!(!b.value||!d.value))try{if(!F.value){if(!confirm(`This will reopen the shift from ${R(new Date(d.value.date))}. Continue?`))return;c(p.shiftId||"")}w(b.value),b.value="",await s(),N.value++,N.value++}catch(l){console.error("Error adding porter:",l),alert("Failed to add porter: "+(l instanceof Error?l.message:String(l)))}},m=async l=>{if(d.value)try{if(!F.value){if(!confirm(`This will reopen the shift from ${R(new Date(d.value.date))}. Continue?`))return;c(p.shiftId||"")}J(l),await s(),N.value++}catch(e){console.error("Error removing porter:",e),alert("Failed to remove porter: "+(e instanceof Error?e.message:String(e)))}};return ot(E),it(()=>p.shiftId,E),(l,e)=>(n(),o("main",Gt,[C(k)?(n(),o("section",Jt,e[6]||(e[6]=[t("div",{class:"spinner"},null,-1),t("p",null,"Loading shift details...",-1)]))):d.value?(n(),o("section",Qt,[t("article",Xt,[t("header",Yt,[t("div",Zt,r(C(R)(new Date(d.value.date))),1),t("div",{class:M(["shift-type",d.value.type.toLowerCase()])},r(d.value.type)+" Shift ",3)]),t("div",{class:"shift-actions"},[t("button",{class:"btn-primary btn-reopen-shift",onClick:h}," Reopen Shift "),t("button",{class:"btn-danger btn-delete-shift",onClick:i}," Delete Shift ")]),t("div",te,[t("div",ee,[t("div",se,[e[8]||(e[8]=t("span",{class:"label"},"Supervisor",-1)),t("span",ne,r(d.value.supervisor),1)]),t("div",oe,[e[9]||(e[9]=t("span",{class:"label"},"Start Time",-1)),t("span",ie,r(C(H)(new Date(d.value.startTime))),1)]),t("div",ae,[e[10]||(e[10]=t("span",{class:"label"},"End Time",-1)),t("span",le,r(d.value.endTime?C(H)(new Date(d.value.endTime)):"Ongoing"),1)]),t("div",re,[e[11]||(e[11]=t("span",{class:"label"},"Duration",-1)),t("span",de,r(C(dt)(d.value.startTime,d.value.endTime||"")),1)])])]),F.value?(n(),o("div",ue,[e[15]||(e[15]=t("h3",null,"Porters Assignment",-1)),e[16]||(e[16]=t("p",{class:"section-description"},"Assign porters to this shift to manage task assignments",-1)),t("div",ce,[t("div",ve,[Z(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>b.value=a),class:"form-control",disabled:!V.value.length},[e[12]||(e[12]=t("option",{value:"",disabled:""},"Select porter",-1)),(n(!0),o(A,null,S(V.value,a=>(n(),o("option",{key:a,value:a},r(a),9,he))),128))],8,me),[[tt,b.value]]),t("button",{class:"btn-primary",onClick:v,disabled:!b.value}," Add Porter ",8,pe)]),T.value.length?(n(),o("div",fe,[e[14]||(e[14]=t("h4",null,"Assigned Porters:",-1)),t("div",ke,[(n(!0),o(A,null,S(T.value,a=>(n(),o("div",{key:a,class:"porter-tag"},[t("span",we,r(a),1),t("button",{class:"remove-porter",onClick:K=>m(a),title:"Remove porter"}," × ",8,ye)]))),128))])])):(n(),o("div",ge,e[13]||(e[13]=[t("p",null,"No porters assigned to this shift yet.",-1)])))])])):(n(),o("div",_e,[e[21]||(e[21]=t("h3",null,"Assigned Porters",-1)),t("div",be,[t("button",{class:"btn-primary btn-sm",onClick:e[1]||(e[1]=a=>z.value=!0)}," Manage Porters ")]),z.value?(n(),o("div",Te,[t("div",Ce,[Z(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>b.value=a),class:"form-control",disabled:!V.value.length},[e[17]||(e[17]=t("option",{value:"",disabled:""},"Select porter",-1)),(n(!0),o(A,null,S(V.value,a=>(n(),o("option",{key:a,value:a},r(a),9,Ae))),128))],8,$e),[[tt,b.value]]),t("button",{class:"btn-primary",onClick:v,disabled:!b.value}," Add Porter ",8,Se)]),T.value.length?(n(),o("div",De,[t("div",Pe,[(n(!0),o(A,null,S(T.value,a=>(n(),o("div",{key:a,class:"porter-tag"},[t("span",Me,r(a),1),t("button",{class:"remove-porter",onClick:K=>m(a),title:"Remove porter"}," × ",8,Ie)]))),128))])])):(n(),o("div",xe,e[18]||(e[18]=[t("p",null,"No porters assigned to this shift.",-1)]))),e[19]||(e[19]=t("div",{class:"porter-management-info"},[t("p",null,"Note: Modifying porters on a completed shift will temporarily reopen it.")],-1))])):T.value.length?(n(),o("div",He,[t("div",Ne,[(n(!0),o(A,null,S(T.value,a=>(n(),o("div",{key:a,class:"porter-tag"},[t("span",Ve,r(a),1)]))),128))])])):(n(),o("div",Be,e[20]||(e[20]=[t("p",null,"No porters were assigned to this shift.",-1)])))])),T.value&&T.value.length>0?(n(),o("div",Ee,[e[22]||(e[22]=t("h3",null,"Department Assignments",-1)),e[23]||(e[23]=t("p",{class:"section-description"},"Assign porters to departments during the shift",-1)),(n(),et(qt,{key:N.value}))])):P("",!0),t("div",je,[t("div",Fe,[t("div",Re,r(d.value.tasks.length),1),e[24]||(e[24]=t("div",{class:"stat-label"},"Total Tasks",-1))]),t("div",Le,[t("div",ze,r(O.value),1),e[25]||(e[25]=t("div",{class:"stat-label"},"Completed",-1))]),t("div",Oe,[t("div",Ue,r(j.value),1),e[26]||(e[26]=t("div",{class:"stat-label"},"Pending",-1))])])]),t("section",We,[t("header",qe,[e[27]||(e[27]=t("h2",null,"Tasks",-1)),t("nav",Ge,[t("button",{class:M(["tab-btn",{active:y.value==="all"}]),onClick:e[3]||(e[3]=a=>y.value="all")}," All ("+r(d.value.tasks.length)+") ",3),t("button",{class:M(["tab-btn",{active:y.value==="completed"}]),onClick:e[4]||(e[4]=a=>y.value="completed")}," Completed ("+r(O.value)+") ",3),t("button",{class:M(["tab-btn",{active:y.value==="pending"}]),onClick:e[5]||(e[5]=a=>y.value="pending")}," Pending ("+r(j.value)+") ",3)])]),U.value.length===0?(n(),o("div",Je,[t("p",null,"No "+r(y.value==="all"?"":y.value)+" tasks for this shift.",1)])):(n(),o("ul",Ke,[(n(!0),o(A,null,S(U.value,a=>(n(),o("li",{key:a.id,class:"task-item"},[t("article",{class:"shift-detail-task",onClick:K=>u(a.id)},[t("div",{class:M(["task-status",a.status.toLowerCase()])},null,2),t("div",Xe,[t("div",Ye,[t("div",Ze,r(a.jobCategory)+" - "+r(a.itemType),1),t("div",ts,r(C(H)(new Date(a.receivedTime))),1)]),t("div",es,[t("span",ss,r(a.fromLocation.displayName),1),e[28]||(e[28]=t("span",{class:"journey-arrow"},"→",-1)),t("span",ns,r(a.toLocation.displayName),1)]),a.status==="Completed"&&a.completedTime?(n(),o("div",os," Completed: "+r(C(H)(new Date(a.completedTime))),1)):P("",!0)]),e[29]||(e[29]=t("button",{class:"edit-button","aria-label":"Edit task"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 1 2 2h14a2 2 0 0 1 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]),t("span",null,"Edit")],-1))],8,Qe)]))),128))]))])])):(n(),o("section",Kt,[e[7]||(e[7]=lt('<div class="empty-icon" data-v-0009c9c2><svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" data-v-0009c9c2><circle cx="12" cy="12" r="10" data-v-0009c9c2></circle><line x1="12" y1="8" x2="12" y2="12" data-v-0009c9c2></line><line x1="12" y1="16" x2="12.01" y2="16" data-v-0009c9c2></line></svg></div><h3 data-v-0009c9c2>Shift Not Found</h3><p data-v-0009c9c2>The shift you&#39;re looking for doesn&#39;t exist or has been deleted.</p>',3)),t("button",{class:"btn-primary",onClick:B}," Back to Archive ")])),at(pt,{"current-route":"archive",onNavigate:C(_)},null,8,["onNavigate"])]))}}),ds=Y(is,[["__scopeId","data-v-0009c9c2"]]);export{ds as default};
