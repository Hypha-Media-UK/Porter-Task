const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeView-DKp7BQRq.js","assets/vendor-DszYqHt7.js","assets/HomeView-CAsAh9HI.css","assets/TasksView-CmdAabkw.js","assets/TaskCard-Bl-rwOR5.js","assets/TaskCard-CX8ZZ27R.css","assets/TasksView-Cr2dgUqq.css","assets/PendingTasksView-D0UUVWz2.js","assets/PendingTasksView-BNmvfEGj.css","assets/CompletedTasksView-Dsh7swDj.js","assets/CompletedTasksView-DockZU4T.css","assets/TaskFormView-ZUbdfN1p.js","assets/TaskFormView-Dm8ILRLs.css","assets/ArchiveView-DqtWNSiR.js","assets/ArchiveView-sxVhN_fO.css","assets/ShiftDetailView-CM4qrb6o.js","assets/ShiftDetailView-rp92LMdt.css","assets/SettingsView-BEloWM3j.js","assets/SettingsView-BDnhMwcs.css"])))=>i.map(i=>d[i]);
import{d as oe,r as x,c as A,a as ne,i as Z,b as O,e as y,f as M,n as ee,t as G,o as C,g as ge,u as pe,w as me,h as K,j as te,k as Se,F as ye,T as we,l as ke,m as Te,p as Ee,q as _e,s as De,v as be}from"./vendor-DszYqHt7.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))h(u);new MutationObserver(u=>{for(const v of u)if(v.type==="childList")for(const d of v.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&h(d)}).observe(document,{childList:!0,subtree:!0});function i(u){const v={};return u.integrity&&(v.integrity=u.integrity),u.referrerPolicy&&(v.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?v.credentials="include":u.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function h(u){if(u.ep)return;u.ep=!0;const v=i(u);fetch(u.href,v)}})();const Ce="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let F=(t=21)=>{let o="",i=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)o+=Ce[i[t]&63];return o};const Q=oe("shift",()=>{const t=x(null),o=x([]),i=x(!1),h=x(null),u="porter-track-current-shift",v="porter-track-archived-shifts",d=A(()=>!!t.value),S=A(()=>t.value?t.value.tasks.filter(s=>s.status==="Pending"):[]),E=A(()=>t.value?t.value.tasks.filter(s=>s.status==="Completed"):[]);async function D(){i.value=!0,h.value=null;try{return await j(),await w(),!0}catch(s){return console.error("Error loading shift data:",s),h.value=s instanceof Error?s.message:"Failed to load shift data",!1}finally{i.value=!1}}async function j(){try{const s=localStorage.getItem(u);if(s)try{const l=JSON.parse(s);return t.value=l,console.log("Loaded current shift from localStorage:",l),!0}catch(l){console.error("Error parsing stored shift:",l)}return console.log("No current shift in localStorage, would normally try API in production"),t.value=null,!0}catch(s){return console.error("Error loading current shift:",s),t.value=null,!1}}async function w(){try{const s=localStorage.getItem(v);if(s)try{const l=JSON.parse(s);return o.value=l,console.log("Loaded archived shifts from localStorage:",l.length),!0}catch(l){console.error("Error parsing stored archived shifts:",l)}return console.log("No archived shifts in localStorage, would normally try API in production"),!1}catch(s){return console.error("Error loading archived shifts:",s),!1}}function _(s,l){if(t.value)throw new Error("Cannot start a new shift while one is already active");const a=new Date,f={id:F(),date:a.toISOString().split("T")[0],type:s,supervisor:l,startTime:a.toISOString(),tasks:[],assignedPorters:[]};return t.value=f,localStorage.setItem(u,JSON.stringify(f)),console.log("Shift started:",f),f}function g(s){if(!t.value)throw new Error("No active shift to add porter to");return t.value.assignedPorters||(t.value.assignedPorters=[]),t.value.assignedPorters.includes(s)?(console.warn(`Porter ${s} is already assigned to this shift`),!1):(t.value.assignedPorters.push(s),localStorage.setItem(u,JSON.stringify(t.value)),console.log(`Porter ${s} added to shift`),!0)}function k(s){if(!t.value||!t.value.assignedPorters)throw new Error("No active shift or no assigned porters");const l=t.value.assignedPorters.indexOf(s);return l===-1?(console.warn(`Porter ${s} is not assigned to this shift`),!1):(t.value.assignedPorters.splice(l,1),localStorage.setItem(u,JSON.stringify(t.value)),console.log(`Porter ${s} removed from shift`),!0)}function R(){if(!t.value)throw new Error("No active shift to end");const s=new Date;t.value.endTime=s.toISOString(),o.value.unshift({...t.value});try{const l=localStorage.getItem(v);let a=l?JSON.parse(l):[];a.unshift({...t.value}),localStorage.setItem(v,JSON.stringify(a))}catch(l){console.error("Error saving archived shifts to localStorage:",l)}return console.log("Shift ended:",t.value),t.value=null,localStorage.removeItem(u),window.dispatchEvent(new CustomEvent("shift-ended")),!0}function J(s){if(!t.value)throw new Error("Cannot create task without an active shift");const l=new Date,a={id:F(),receivedTime:s.receivedTime||l.toISOString(),allocatedTime:s.allocatedTime||l.toISOString(),status:s.status||"Pending",...s};return t.value.tasks.unshift(a),localStorage.setItem(u,JSON.stringify(t.value)),console.log("Task created:",a),a}function V(s,l){if(!t.value)throw new Error("No active shift");const a=t.value.tasks.find(I=>I.id===s);if(!a)throw new Error(`Task with ID ${s} not found`);const f=new Date;return a.status=l,l==="Completed"&&(a.completedTime=f.toISOString()),localStorage.setItem(u,JSON.stringify(t.value)),console.log("Task updated:",a),a}function H(s,l){if(t.value){const a=t.value.tasks.findIndex(f=>f.id===s);if(a!==-1){const f={...t.value.tasks[a],...l,id:s};return t.value.tasks[a]=f,localStorage.setItem(u,JSON.stringify(t.value)),console.log("Task updated in current shift:",f),f}}for(let a=0;a<o.value.length;a++){const f=o.value[a],I=f.tasks.findIndex($=>$.id===s);if(I!==-1){const $={...f.tasks[I],...l,id:s};return f.tasks[I]=$,localStorage.setItem(v,JSON.stringify(o.value)),console.log("Task updated in archived shift:",$),$}}throw new Error(`Task with ID ${s} not found in any shift`)}function N(s){if(t.value){const l=t.value.tasks.findIndex(a=>a.id===s);if(l!==-1)return t.value.tasks.splice(l,1),localStorage.setItem(u,JSON.stringify(t.value)),console.log("Task deleted from current shift:",s),!0}for(let l=0;l<o.value.length;l++){const a=o.value[l],f=a.tasks.findIndex(I=>I.id===s);if(f!==-1)return a.tasks.splice(f,1),localStorage.setItem(v,JSON.stringify(o.value)),console.log("Task deleted from archived shift:",s),!0}throw new Error(`Task with ID ${s} not found in any shift`)}async function W(s){const l=o.value.find(a=>a.id===s);if(l)return l;i.value=!0;try{const a=await fetch(`/data/shifts/${s}.json`);if(!a.ok){if(a.status===404)return null;throw new Error(`Failed to load shift: ${a.status} ${a.statusText}`)}return await a.json()}catch(a){return console.error(`Error loading shift ${s}:`,a),null}finally{i.value=!1}}function z(s){if(t.value){const l=t.value.tasks.find(a=>a.id===s);if(l)return l}if(o.value.length>0)for(const l of o.value){const a=l.tasks.find(f=>f.id===s);if(a)return a}return null}function X(){const s=[],l=new Date;for(let a=1;a<=5;a++){const f=new Date(l);f.setDate(l.getDate()-a);const I={id:`day-shift-${a}-${F(6)}`,date:f.toISOString().split("T")[0],type:"Day",supervisor:"Day Supervisor "+a,startTime:new Date(f.getFullYear(),f.getMonth(),f.getDate(),8,0,0).toISOString(),endTime:new Date(f.getFullYear(),f.getMonth(),f.getDate(),16,0,0).toISOString(),tasks:[]};for(let p=0;p<Math.floor(Math.random()*8)+3;p++){const b=new Date(f);b.setHours(8+Math.floor(p/2)),b.setMinutes(p%2*30),I.tasks.push({id:`day-task-${a}-${p}-${F(6)}`,receivedTime:b.toISOString(),allocatedTime:new Date(b.getTime()+5*60*1e3).toISOString(),completedTime:new Date(b.getTime()+25*60*1e3).toISOString(),status:"Completed",jobCategory:p%3===0?"Patient Transfer":p%3===1?"Specimen Delivery":"Equipment Transport",itemType:p%3===0?"Wheelchair":p%3===1?"Blood Sample":"Medical Device",fromLocation:{building:"main",locationId:p%2===0?"emergency":"radiology",locationType:"department",displayName:p%2===0?"Emergency Department":"Radiology"},toLocation:{building:"main",locationId:"ward"+(p%3+1),locationType:"ward",displayName:"Ward "+(p%3+1)}})}s.push(I);const $={id:`night-shift-${a}-${F(6)}`,date:f.toISOString().split("T")[0],type:"Night",supervisor:"Night Supervisor "+a,startTime:new Date(f.getFullYear(),f.getMonth(),f.getDate(),16,0,0).toISOString(),endTime:new Date(f.getFullYear(),f.getMonth(),f.getDate()+1,0,0,0).toISOString(),tasks:[]};for(let p=0;p<Math.floor(Math.random()*5)+2;p++){const b=new Date(f);b.setHours(16+Math.floor(p/2)),b.setMinutes(p%2*30),$.tasks.push({id:`night-task-${a}-${p}-${F(6)}`,receivedTime:b.toISOString(),allocatedTime:new Date(b.getTime()+5*60*1e3).toISOString(),completedTime:new Date(b.getTime()+25*60*1e3).toISOString(),status:"Completed",jobCategory:p%3===0?"Patient Transfer":p%3===1?"Document Delivery":"Medication Delivery",itemType:p%3===0?"Stretcher":p%3===1?"Patient Records":"Routine Medication",fromLocation:{building:"main",locationId:p%2===0?"pharmacy":"laboratory",locationType:"department",displayName:p%2===0?"Pharmacy":"Laboratory"},toLocation:{building:"main",locationId:"ward"+(p%3+1),locationType:"ward",displayName:"Ward "+(p%3+1)}})}s.push($)}o.value=s,console.log("Created test archived shifts:",s)}function q(s){const l=o.value.findIndex(a=>a.id===s);if(l===-1)throw new Error(`Shift with ID ${s} not found`);return o.value.splice(l,1),console.log("Shift deleted:",s),!0}function U(s){const l=o.value.findIndex(f=>f.id===s);if(l===-1)throw new Error(`Shift with ID ${s} not found`);if(t.value)throw new Error("Cannot reopen a shift while another is active. Please end the current shift first.");const a={...o.value[l]};return delete a.endTime,t.value=a,o.value.splice(l,1),console.log("Shift reopened:",a),a}return{currentShift:t,archivedShifts:o,isLoading:i,error:h,isShiftActive:d,pendingTasks:S,completedTasks:E,loadShiftData:D,loadCurrentShift:j,loadArchivedShifts:w,startShift:_,endShift:R,createTask:J,updateTask:H,deleteTask:N,updateTaskStatus:V,getShift:W,getTask:z,deleteShift:q,reopenShift:U,addPorterToShift:g,removePorterFromShift:k}}),se="/.netlify/functions";async function Ie(t){try{const o=await fetch(`${se}/save-settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!o.ok)throw new Error(`HTTP error! Status: ${o.status}`);return await o.json()}catch(o){throw console.error("Error saving settings:",o),o}}async function Oe(t){try{const o=await fetch(`${se}/save-locations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!o.ok)throw new Error(`HTTP error! Status: ${o.status}`);return await o.json()}catch(o){throw console.error("Error saving locations:",o),o}}const ae=oe("settings",()=>{const t=x([]),o=x([]),i=x({}),h=x([]),u=x([]),v=x({day:{start:"08:00",end:"16:00"},night:{start:"20:00",end:"04:00"}}),d=x(!1),S=x(null);async function E(){d.value=!0,S.value=null;try{return await D(),await w(),!0}catch(e){return console.error("Error initializing settings:",e),S.value=e instanceof Error?e.message:"Failed to load settings",!1}finally{d.value=!1}}async function D(){try{const e=localStorage.getItem("porterTrackSettings");if(e)try{const c=JSON.parse(e);return j(c),console.log("Settings loaded from localStorage"),!0}catch(c){console.warn("Error parsing localStorage settings, falling back to JSON file:",c)}const r=await fetch("/data/settings.json");if(!r.ok)throw new Error(`Failed to load settings: ${r.status} ${r.statusText}`);const n=await r.json();return j(n),!0}catch(e){throw console.error("Error loading settings:",e),S.value=e instanceof Error?e.message:"Failed to load settings",e}}function j(e){e.supervisors&&(t.value=e.supervisors),e.porters&&(o.value=e.porters),e.jobCategories&&(i.value=e.jobCategories),e.jobCategoryDefaults&&(u.value=e.jobCategoryDefaults),e.shifts&&(v.value=e.shifts)}async function w(){try{const e=await fetch("/data/locations.json");if(!e.ok)throw new Error(`Failed to load location data: ${e.status} ${e.statusText}`);const r=await e.json();return h.value=r.buildings,!0}catch(e){throw console.error("Error loading location data:",e),S.value=e instanceof Error?e.message:"Failed to load location data",e}}async function _(){try{const e={supervisors:t.value,porters:o.value,jobCategories:i.value,jobCategoryDefaults:u.value,shifts:v.value};console.log("Saving settings:",e);try{const r=await Ie(e);console.log("Settings saved via Netlify function:",r)}catch(r){console.warn("Could not save settings via API:",r);try{localStorage.setItem("porterTrackSettings",JSON.stringify(e)),console.log("Settings saved to localStorage as fallback")}catch(n){console.warn("Could not save to localStorage:",n),console.info("Changes are in memory only and will be lost on refresh")}}return!0}catch(e){return console.error("Error saving settings:",e),S.value=e instanceof Error?e.message:"Failed to save settings",!1}}async function g(){try{const e={buildings:h.value};console.log("Saving location data:",e);try{const r=await Oe(e);console.log("Location data saved via Netlify function:",r)}catch(r){console.warn("Could not save location data via API:",r);try{localStorage.setItem("porterTrackLocations",JSON.stringify(e)),console.log("Location data saved to localStorage as fallback")}catch(n){console.warn("Could not save location data to localStorage:",n),console.info("Changes are in memory only and will be lost on refresh")}}return!0}catch(e){return console.error("Error saving location data:",e),S.value=e instanceof Error?e.message:"Failed to save location data",!1}}function k(e){return e.supervisors!==void 0&&(t.value=e.supervisors),e.porters!==void 0&&(o.value=e.porters),e.jobCategories!==void 0&&(i.value=e.jobCategories),e.jobCategoryDefaults!==void 0&&(u.value=e.jobCategoryDefaults),e.shifts!==void 0&&(v.value=e.shifts),_(),!0}function R(e){return!e.trim()||t.value.includes(e)?!1:(t.value.push(e),k({supervisors:t.value}),!0)}function J(e,r){const n=t.value.indexOf(e);return n===-1||!r.trim()||r!==e&&t.value.includes(r)?!1:(t.value[n]=r,k({supervisors:t.value}),!0)}function V(e){const r=t.value.indexOf(e);return r===-1?!1:(t.value.splice(r,1),k({supervisors:t.value}),!0)}function H(e){return!e.trim()||o.value.includes(e)?!1:(o.value.push(e),k({porters:o.value}),!0)}function N(e,r){const n=o.value.indexOf(e);return n===-1||!r.trim()||r!==e&&o.value.includes(r)?!1:(o.value[n]=r,k({porters:o.value}),!0)}function W(e){const r=o.value.indexOf(e);return r===-1?!1:(o.value.splice(r,1),k({porters:o.value}),!0)}function z(e){return!e.trim()||e in i.value?!1:(i.value[e]=[],k({jobCategories:i.value}),!0)}function X(e,r){if(!r.trim()||r in i.value||!(e in i.value))return!1;const n=[...i.value[e]];return delete i.value[e],i.value[r]=n,k({jobCategories:i.value}),!0}function q(e){return e in i.value?(delete i.value[e],k({jobCategories:i.value}),!0):!1}function U(e,r){return!r.trim()||!(e in i.value)||i.value[e].includes(r)?!1:(i.value[e].push(r),k({jobCategories:i.value}),!0)}function s(e,r,n){if(!n.trim()||!(e in i.value))return!1;const c=i.value[e].indexOf(r);return c===-1||n!==r&&i.value[e].includes(n)?!1:(i.value[e][c]=n,k({jobCategories:i.value}),!0)}function l(e,r){if(!(e in i.value))return!1;const n=i.value[e].indexOf(r);return n===-1?!1:(i.value[e].splice(n,1),k({jobCategories:i.value}),!0)}function a(e){const r=h.value.find(n=>n.id===e);return r==null?void 0:r.name}function f(e,r,n){const c=h.value.find(Y=>Y.id===e);if(!c)return;const T=(n==="department"?c.departments:c.wards).find(Y=>Y.id===r);return T==null?void 0:T.name}function I(e){if(!e.trim()||h.value.some(c=>c.name===e))return!1;const r=e.toLowerCase().replace(/\s+/g,"-");if(h.value.some(c=>c.id===r))return!1;const n={id:r,name:e,departments:[],wards:[]};return h.value.push(n),console.log("Building added:",n),g(),!0}function $(e,r){if(!r.trim())return!1;const n=h.value.find(c=>c.id===e);return!n||h.value.some(c=>c.name===r&&c.id!==e)?!1:(n.name=r,console.log("Building updated:",n),g(),!0)}function p(e){const r=h.value.findIndex(n=>n.id===e);return r===-1?!1:(h.value.splice(r,1),console.log("Building deleted:",e),g(),!0)}function b(e,r){if(!r.trim())return!1;const n=h.value.find(m=>m.id===e);if(!n||n.departments.some(m=>m.name===r))return!1;const c=r.toLowerCase().replace(/\s+/g,"-");return n.departments.some(m=>m.id===c)?!1:(n.departments.push({id:c,name:r}),console.log("Department added:",{buildingId:e,department:{id:c,name:r}}),g(),!0)}function ie(e,r,n){if(!n.trim())return!1;const c=h.value.find(T=>T.id===e);if(!c)return!1;const m=c.departments.find(T=>T.id===r);return!m||c.departments.some(T=>T.name===n&&T.id!==r)?!1:(m.name=n,console.log("Department updated:",{buildingId:e,department:m}),g(),!0)}function le(e,r){const n=h.value.find(m=>m.id===e);if(!n)return!1;const c=n.departments.findIndex(m=>m.id===r);return c===-1?!1:(n.departments.splice(c,1),console.log("Department deleted:",{buildingId:e,departmentId:r}),g(),!0)}function ue(e,r){if(!r.trim())return!1;const n=h.value.find(m=>m.id===e);if(!n||n.wards.some(m=>m.name===r))return!1;const c=r.toLowerCase().replace(/\s+/g,"-");return n.wards.some(m=>m.id===c)?!1:(n.wards.push({id:c,name:r}),console.log("Ward added:",{buildingId:e,ward:{id:c,name:r}}),g(),!0)}function ce(e,r,n){if(!n.trim())return!1;const c=h.value.find(T=>T.id===e);if(!c)return!1;const m=c.wards.find(T=>T.id===r);return!m||c.wards.some(T=>T.name===n&&T.id!==r)?!1:(m.name=n,console.log("Ward updated:",{buildingId:e,ward:m}),g(),!0)}function de(e,r){const n=h.value.find(m=>m.id===e);if(!n)return!1;const c=n.wards.findIndex(m=>m.id===r);return c===-1?!1:(n.wards.splice(c,1),console.log("Ward deleted:",{buildingId:e,wardId:r}),g(),!0)}function fe(e,r){if(r){const n=u.value.find(c=>c.category===e&&c.itemType===r);if(n)return n}return u.value.find(n=>n.category===e&&!n.itemType)}function he(e){let r=-1;return e.itemType?r=u.value.findIndex(n=>n.category===e.category&&n.itemType===e.itemType):r=u.value.findIndex(n=>n.category===e.category&&!n.itemType),r!==-1?u.value[r]=e:u.value.push(e),_(),!0}function ve(e,r){let n=-1;return r?n=u.value.findIndex(c=>c.category===e&&c.itemType===r):n=u.value.findIndex(c=>c.category===e&&!c.itemType),n===-1?!1:(u.value.splice(n,1),_(),!0)}return{supervisors:t,porters:o,jobCategories:i,buildings:h,jobCategoryDefaults:u,shifts:v,isLoading:d,error:S,initialize:E,loadSettings:D,loadLocationData:w,updateSettings:k,addSupervisor:R,updateSupervisor:J,deleteSupervisor:V,addPorter:H,updatePorter:N,deletePorter:W,addCategory:z,updateCategory:X,deleteCategory:q,addItemType:U,updateItemType:s,deleteItemType:l,addBuilding:I,updateBuilding:$,deleteBuilding:p,addDepartment:b,updateDepartment:ie,deleteDepartment:le,addWard:ue,updateWard:ce,deleteWard:de,getJobCategoryDefault:fe,setJobCategoryDefault:he,deleteJobCategoryDefault:ve,getBuildingName:a,getLocationName:f}});function xe(t){return t.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}function et(t){return t.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})}function tt(t,o){if(!t||!o)return"--";const i=typeof t=="string"?new Date(t):t,u=(typeof o=="string"?new Date(o):o).getTime()-i.getTime();if(u<0)return"--";const v=Math.floor(u/(1e3*60*60)),d=Math.floor(u%(1e3*60*60)/(1e3*60));return v===0?`${d}m`:d===0?`${v}h`:`${v}h ${d}m`}const Pe={class:"header"},$e={class:"header-left"},je={class:"nav-icons"},Le={key:0,class:"page-title"},Ae={key:1,class:"page-title"},Be={key:2,class:"page-title"},Fe={key:3,class:"page-title"},Me={key:4,class:"page-title"},Re={key:5,class:"page-title"},Je={key:6,class:"page-title"},Ve={class:"header-right"},He={key:0,class:"badge-count","aria-label":"{{ pendingTasksCount }} pending tasks"},Ne=ne({__name:"Header",props:{taskId:{}},setup(t){const o=Z("route"),i=Z("router"),h=Q(),u=h.currentShift,v=A(()=>h.isShiftActive),d=A(()=>(o==null?void 0:o.path)||"/"),S=A(()=>d.value==="/tasks"&&v.value?!1:d.value!=="/"),E=A(()=>{if(!u)return"Current Shift";const _=new Date(u.date),g=xe(_);return`${u.type} Shift ${g}`}),D=A(()=>h.currentShift?h.currentShift.tasks.filter(_=>_.status==="Pending").length:0),j=()=>{i&&(d.value==="/tasks/pending"||d.value==="/tasks/completed"?i.push("/tasks"):d.value.startsWith("/archive/")?i.push("/archive"):d.value==="/tasks/form"?i.back():i.push("/"))},w=_=>{i&&i.push(_)};return(_,g)=>(C(),O("header",Pe,[y("div",$e,[S.value?(C(),O("button",{key:0,class:"back-button",onClick:j,"aria-label":"Go back"},g[4]||(g[4]=[y("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[y("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1)]))):M("",!0),y("nav",je,[y("button",{class:"nav-button",onClick:g[0]||(g[0]=k=>w("/")),"aria-label":"Home"},g[5]||(g[5]=[y("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[y("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),y("polyline",{points:"9 22 9 12 15 12 15 22"})],-1)])),y("button",{class:ee(["nav-button",{active:d.value==="/archive"}]),onClick:g[1]||(g[1]=k=>w("/archive")),"aria-label":"Archive"},g[6]||(g[6]=[y("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[y("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),y("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})],-1)]),2),y("button",{class:ee(["nav-button",{active:d.value==="/settings"}]),onClick:g[2]||(g[2]=k=>w("/settings")),"aria-label":"Settings"},g[7]||(g[7]=[y("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[y("circle",{cx:"12",cy:"12",r:"3"}),y("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})],-1)]),2)])]),d.value==="/tasks"?(C(),O("h1",Le,G(E.value),1)):d.value==="/tasks/pending"?(C(),O("h1",Ae,"Pending Tasks")):d.value==="/tasks/completed"?(C(),O("h1",Be,"Completed Tasks")):d.value==="/archive"?(C(),O("h1",Fe,"Shift Archive")):d.value.startsWith("/archive/")?(C(),O("h1",Me,"Shift Details")):d.value==="/settings"?(C(),O("h1",Re,"Settings")):d.value==="/tasks/form"?(C(),O("h1",Je,G(_.taskId?"Edit Task":"New Task"),1)):M("",!0),y("div",Ve,[v.value?(C(),O("button",{key:0,class:"nav-button tasks-button active",onClick:g[3]||(g[3]=k=>w("/tasks")),"aria-label":"Tasks"},[g[8]||(g[8]=y("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[y("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),y("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"}),y("path",{d:"M9 14l2 2 4-4"})],-1)),D.value>0?(C(),O("span",He,G(D.value),1)):M("",!0)])):M("",!0)])]))}}),We=(t,o)=>{const i=t.__vccOpts||t;for(const[h,u]of o)i[h]=u;return i},ze=We(Ne,[["__scopeId","data-v-a66694bb"]]),qe={class:"main-content"},Ue=ne({__name:"App",setup(t){const o=pe(),i=Q(),h=ae(),{loadShiftData:u,isShiftActive:v}=i;return ge(async()=>{console.log("App mounted - initializing application..."),await h.initialize(),await u(),v&&o.currentRoute.value.name==="home"&&(console.log("Active shift detected, navigating to tasks screen"),o.push({name:"tasks"}))}),me(()=>v,(d,S)=>{!d&&S&&o.push({name:"home"})}),(d,S)=>{const E=Se("router-view");return C(),O(ye,null,[K(ze),y("main",qe,[K(E,null,{default:te(({Component:D})=>[K(we,{name:"fade",mode:"out-in"},{default:te(()=>[(C(),ke(Te(D)))]),_:2},1024)]),_:1})])],64)}}}),Ye="modulepreload",Ge=function(t){return"/"+t},re={},L=function(o,i,h){let u=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),S=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));u=Promise.allSettled(i.map(E=>{if(E=Ge(E),E in re)return;re[E]=!0;const D=E.endsWith(".css"),j=D?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${E}"]${j}`))return;const w=document.createElement("link");if(w.rel=D?"stylesheet":Ye,D||(w.as="script"),w.crossOrigin="",w.href=E,S&&w.setAttribute("nonce",S),document.head.appendChild(w),D)return new Promise((_,g)=>{w.addEventListener("load",_),w.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${E}`)))})}))}function v(d){const S=new Event("vite:preloadError",{cancelable:!0});if(S.payload=d,window.dispatchEvent(S),!S.defaultPrevented)throw d}return u.then(d=>{for(const S of d||[])S.status==="rejected"&&v(S.reason);return o().catch(v)})},Ke=[{path:"/",name:"home",component:()=>L(()=>import("./HomeView-DKp7BQRq.js"),__vite__mapDeps([0,1,2]))},{path:"/tasks",name:"tasks",component:()=>L(()=>import("./TasksView-CmdAabkw.js"),__vite__mapDeps([3,1,4,5,6]))},{path:"/tasks/pending",name:"pendingTasks",component:()=>L(()=>import("./PendingTasksView-D0UUVWz2.js"),__vite__mapDeps([7,4,1,5,8]))},{path:"/tasks/completed",name:"completedTasks",component:()=>L(()=>import("./CompletedTasksView-Dsh7swDj.js"),__vite__mapDeps([9,4,1,5,10]))},{path:"/tasks/form",name:"taskForm",component:()=>L(()=>import("./TaskFormView-ZUbdfN1p.js"),__vite__mapDeps([11,1,12])),props:t=>({taskId:t.query.taskId})},{path:"/archive",name:"archive",component:()=>L(()=>import("./ArchiveView-DqtWNSiR.js"),__vite__mapDeps([13,1,14]))},{path:"/archive/:shiftId",name:"shiftDetail",component:()=>L(()=>import("./ShiftDetailView-CM4qrb6o.js"),__vite__mapDeps([15,1,16])),props:!0},{path:"/settings",name:"settings",component:()=>L(()=>import("./SettingsView-BEloWM3j.js"),__vite__mapDeps([17,1,18]))}],P=Ee({history:_e(),routes:Ke,scrollBehavior(){return{top:0}}}),Qe=De(),B=be(Ue);B.use(Qe);B.use(P);B.provide("router",P);B.provide("route",P.currentRoute);B.provide("navigate",(t,o)=>{if(t==="home")P.push({name:"home"});else if(t==="tasks")P.push({name:"tasks"});else if(t==="pendingTasks")P.push({name:"pendingTasks"});else if(t==="completedTasks")P.push({name:"completedTasks"});else if(t==="taskForm"){const i=(o==null?void 0:o.taskId)||(typeof o=="object"?o.taskId:void 0);P.push({name:"taskForm",query:i?{taskId:i}:void 0})}else t==="archive"?P.push({name:"archive"}):t==="shiftDetail"?P.push({name:"shiftDetail",params:{shiftId:o==null?void 0:o.shiftId}}):t==="settings"&&P.push({name:"settings"})});B.config.globalProperties.$appInitialized=!1;const Xe=async()=>{try{await ae().initialize(),await Q().loadShiftData(),console.log("App mounted - initializing application..."),B.config.globalProperties.$appInitialized=!0}catch(t){console.error("Error initializing application:",t)}};Xe();window.addEventListener("shift-ended",()=>{P.push({name:"home"})});B.mount("#app");export{We as _,ae as a,et as b,tt as c,xe as f,Q as u};
